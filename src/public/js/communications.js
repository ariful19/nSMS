import{j as E,c as T,a as i,o as a,b as e,h as c,w as _,v as g,e as C,F as h,f as $,t as r,g as L,n as D,r as P,l as R,i as j,m as O,d as M,T as F,p as H}from"./chunks/sq-avatar-badge-iwxELXVT.js";import{_ as V}from"./chunks/_plugin-vue_export-helper-DlAUqK2U.js";const q={class:"notice-center"},G={class:"notice-center__header"},z={class:"notice-center__actions"},J={class:"notice-center__filters"},Y={class:"form__field"},K={class:"form__field"},Q=["value"],W={key:0,class:"form__field form__field--checkbox"},X={class:"notice-center__audiences",role:"group","aria-label":"Audience"},Z={class:"chip-group"},ee=["onClick"],te={key:0,class:"notice-center__cta"},se={key:0,class:"notice-center__empty"},ne={key:1,class:"notice-center__list"},le={class:"notice-card__header"},oe={class:"notice-card__title"},ie=["href"],ae={key:0,class:"notice-card__summary"},re={class:"notice-card__badges"},de={key:0,class:"badge badge--accent"},ue=["innerHTML"],ce={class:"notice-card__footer"},me={class:"notice-card__dates"},fe={key:0},_e={key:1},pe={key:0,class:"notice-card__actions"},ve=["href"],be=["action"],ye=["value"],he={__name:"NoticeCenterApp",props:{notices:{type:Array,default:()=>[]},lookups:{type:Object,default:()=>({statuses:[],roles:[]})},filters:{type:Object,default:()=>({})},canManage:{type:Boolean,default:!1},csrfToken:{type:String,default:""}},setup(l){const d=l,u=E({search:d.filters.search||"",status:d.filters.status||"",includeExpired:!!d.filters.includeExpired}),f=E(new Set((d.filters.audienceRoleIds||[]).map(Number)));function p(m){f.has(m)?f.delete(m):f.add(m)}function o(m){return m?`badge--status-${m.toLowerCase()}`:""}function k(m,s=!1){if(!m)return"";const t=m instanceof Date?m:new Date(m);return Number.isNaN(t.getTime())?"":s?t.toLocaleDateString():t.toLocaleString()}function v(m=[]){const s=m.map(t=>t.role?t.role.name:null).filter(Boolean);return s.length>0?s.join(", "):"All"}function b(m){window.confirm("Delete this notice?")||m.preventDefault()}const y=T(()=>{const m=u.search.toLowerCase(),s=u.status,t=u.includeExpired,n=f.size>0?Array.from(f):null,N=new Date;return(d.notices||[]).filter(S=>{if(m&&!`${S.title||""} ${S.summary||""}`.toLowerCase().includes(m)||s&&S.status!==s)return!1;if(!t&&S.expiresAt){const x=new Date(S.expiresAt);if(!Number.isNaN(x.getTime())&&x<N)return!1}if(n){const x=new Set((S.audiences||[]).map(A=>A.roleId));if(!n.some(A=>x.has(A)))return!1}return!0})});return(m,s)=>(a(),i("section",q,[e("header",G,[s[10]||(s[10]=e("div",null,[e("h1",null,"Notices"),e("p",null,"Filter announcements and share updates with the community.")],-1)),e("div",z,[e("div",J,[e("label",Y,[s[4]||(s[4]=e("span",{class:"form__label"},"Search",-1)),_(e("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>u.search=t),type:"search",placeholder:"Title or summary"},null,512),[[g,u.search,void 0,{trim:!0}]])]),e("label",K,[s[6]||(s[6]=e("span",{class:"form__label"},"Status",-1)),_(e("select",{"onUpdate:modelValue":s[1]||(s[1]=t=>u.status=t)},[s[5]||(s[5]=e("option",{value:""},"All",-1)),(a(!0),i(h,null,$(l.lookups.statuses,t=>(a(),i("option",{key:t,value:t},r(t),9,Q))),128))],512),[[C,u.status]])]),l.canManage?(a(),i("label",W,[_(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>u.includeExpired=t),type:"checkbox"},null,512),[[L,u.includeExpired]]),s[7]||(s[7]=e("span",null,"Show expired",-1))])):c("",!0),e("div",X,[s[8]||(s[8]=e("span",{class:"form__label"},"Audience",-1)),e("div",Z,[(a(!0),i(h,null,$(l.lookups.roles,t=>(a(),i("button",{key:t.id,type:"button",class:D(["chip",{"chip--active":f.has(t.id)}]),onClick:n=>p(t.id)},r(t.name),11,ee))),128))])])]),l.canManage?(a(),i("div",te,[...s[9]||(s[9]=[e("a",{class:"btn btn--primary",href:"/notices/create"},"New notice",-1)])])):c("",!0)])]),y.value.length===0?(a(),i("div",se,[...s[11]||(s[11]=[e("p",null,"No notices match your filters.",-1)])])):(a(),i("div",ne,[(a(!0),i(h,null,$(y.value,t=>(a(),i("article",{key:t.id,class:"notice-card"},[e("header",le,[e("div",null,[e("h2",oe,[e("a",{href:`/notices/${t.id}`},r(t.title),9,ie)]),t.summary?(a(),i("p",ae,r(t.summary),1)):c("",!0)]),e("div",re,[e("span",{class:D(["badge",o(t.status)])},r(t.status),3),t.isPinned?(a(),i("span",de,"Pinned")):c("",!0)])]),e("div",{class:"notice-card__body",innerHTML:t.content},null,8,ue),e("footer",ce,[e("div",null,[s[12]||(s[12]=e("strong",null,"Audience:",-1)),e("span",null,r(v(t.audiences)),1)]),e("div",me,[t.publishAt?(a(),i("span",fe,"Published "+r(k(t.publishAt)),1)):c("",!0),t.expiresAt?(a(),i("span",_e,"Visible until "+r(k(t.expiresAt,!0)),1)):c("",!0)]),l.canManage?(a(),i("div",pe,[e("a",{href:`/notices/${t.id}/edit`,class:"btn btn--small"},"Edit",8,ve),e("form",{method:"post",action:`/notices/${t.id}/delete`,class:"form form--inline",onSubmit:s[3]||(s[3]=n=>b(n))},[e("input",{type:"hidden",name:"_csrf",value:l.csrfToken},null,8,ye),s[13]||(s[13]=e("button",{type:"submit",class:"btn btn--small btn--danger"},"Delete",-1))],40,be)])):c("",!0)])]))),128))]))]))}},$e=V(he,[["__scopeId","data-v-af71a09d"]]),ge={class:"card card--form"},Ae={class:"card__header"},ke={class:"card__title"},we={key:0,class:"alert alert--danger",role:"alert"},De=["action"],Ne=["value"],Se={class:"form__field"},xe={class:"form__field"},Te={class:"form__field form__field--full"},Ee={class:"form__grid"},Ce={class:"form__field"},Ve=["value"],Le={class:"form__field"},Pe={class:"form__field"},Ue={class:"form__field form__field--checkbox"},Ie={class:"form__fieldset"},Me={class:"form__checkbox-grid"},Be=["value"],Re={class:"form__actions"},Oe={type:"submit",class:"btn btn--primary"},Fe={key:0,class:"notice-preview"},je={class:"notice-preview__header"},He={class:"notice-preview__meta"},qe={key:0},Ge={key:1},ze={key:0,class:"notice-preview__summary"},Je=["innerHTML"],Ye={class:"notice-preview__footer"},Ke={__name:"NoticeFormApp",props:{lookups:{type:Object,default:()=>({statuses:[],roles:[]})},values:{type:Object,default:()=>({})},errors:{type:Array,default:()=>[]},isEditMode:{type:Boolean,default:!1},noticeId:{type:Number,default:null},csrfToken:{type:String,default:""},formAction:{type:String,default:"/notices/create"}},setup(l){const d=l,u=T(()=>d.errors||[]),f=P(null),p=P(!1),o=E({title:d.values.title||"",summary:d.values.summary||"",content:d.values.content||"",status:d.values.status||"",publishAt:d.values.publishAt||"",expiresAt:d.values.expiresAt||"",isPinned:!!d.values.isPinned});o.audienceRoleIds=(d.values.audienceRoleIds||[]).map(s=>String(s));function k(){const s=f.value;s&&s.submit()}function v(){p.value=!p.value}function b(s){return s?`badge--status-${s.toLowerCase()}`:"badge--status-draft"}function y(s){if(!s)return"";const t=new Date(s);return Number.isNaN(t.getTime())?"":t.toLocaleString()}const m=T(()=>{const s=d.lookups.roles.filter(t=>o.audienceRoleIds.includes(String(t.id))).map(t=>t.name);return s.length>0?s.join(", "):"All"});return(s,t)=>(a(),i("section",ge,[e("header",Ae,[e("div",null,[e("h1",ke,r(l.isEditMode?"Edit notice":"Create notice"),1),t[8]||(t[8]=e("p",{class:"card__subtitle"},"Craft updates and choose when and where they appear.",-1))]),t[9]||(t[9]=e("a",{class:"btn btn--ghost",href:"/notices"},"Back to notices",-1))]),u.value.length?(a(),i("div",we,[t[10]||(t[10]=e("p",null,[e("strong",null,"Please review the following:")],-1)),e("ul",null,[(a(!0),i(h,null,$(u.value,n=>(a(),i("li",{key:n},r(n),1))),128))])])):c("",!0),e("form",{ref_key:"formRef",ref:f,method:"post",action:l.formAction,class:"form",onSubmit:j(k,["prevent"])},[e("input",{type:"hidden",name:"_csrf",value:l.csrfToken},null,8,Ne),e("label",Se,[t[11]||(t[11]=e("span",{class:"form__label"},"Title *",-1)),_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>o.title=n),type:"text",name:"title",required:""},null,512),[[g,o.title,void 0,{trim:!0}]])]),e("label",xe,[t[12]||(t[12]=e("span",{class:"form__label"},"Summary",-1)),_(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=n=>o.summary=n),name:"summary",rows:"2"},null,512),[[g,o.summary,void 0,{trim:!0}]])]),e("label",Te,[t[13]||(t[13]=e("span",{class:"form__label"},"Content *",-1)),_(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=n=>o.content=n),name:"content",rows:"8",required:""},null,512),[[g,o.content]])]),e("div",Ee,[e("label",Ce,[t[15]||(t[15]=e("span",{class:"form__label"},"Status",-1)),_(e("select",{"onUpdate:modelValue":t[3]||(t[3]=n=>o.status=n),name:"status"},[t[14]||(t[14]=e("option",{value:""},"Draft",-1)),(a(!0),i(h,null,$(l.lookups.statuses,n=>(a(),i("option",{key:n,value:n},r(n),9,Ve))),128))],512),[[C,o.status]])]),e("label",Le,[t[16]||(t[16]=e("span",{class:"form__label"},"Publish at",-1)),_(e("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>o.publishAt=n),type:"datetime-local",name:"publishAt"},null,512),[[g,o.publishAt]])]),e("label",Pe,[t[17]||(t[17]=e("span",{class:"form__label"},"Expires at",-1)),_(e("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>o.expiresAt=n),type:"datetime-local",name:"expiresAt"},null,512),[[g,o.expiresAt]])]),e("label",Ue,[_(e("input",{"onUpdate:modelValue":t[6]||(t[6]=n=>o.isPinned=n),type:"checkbox",name:"isPinned",value:"true"},null,512),[[L,o.isPinned]]),t[18]||(t[18]=e("span",null,"Pin to top",-1))])]),e("fieldset",Ie,[t[19]||(t[19]=e("legend",{class:"form__legend"},"Audience",-1)),t[20]||(t[20]=e("p",{class:"form__hint"},"Select the roles that should receive this notice.",-1)),e("div",Me,[(a(!0),i(h,null,$(l.lookups.roles,n=>(a(),i("label",{key:n.id,class:"form__checkbox"},[_(e("input",{type:"checkbox",name:"audienceRoleIds",value:n.id,"onUpdate:modelValue":t[7]||(t[7]=N=>o.audienceRoleIds=N)},null,8,Be),[[L,o.audienceRoleIds]]),e("span",null,r(n.name),1)]))),128))])]),e("div",Re,[e("button",Oe,r(l.isEditMode?"Save changes":"Create notice"),1),e("button",{type:"button",class:"btn btn--ghost",onClick:v},r(p.value?"Hide preview":"Preview"),1)])],40,De),R(F,{name:"fade"},{default:O(()=>[p.value?(a(),i("section",Fe,[e("header",je,[e("h2",null,r(o.title||"Untitled notice"),1),e("div",He,[e("span",{class:D(["badge",b(o.status)])},r(o.status||"DRAFT"),3),o.publishAt?(a(),i("span",qe,"Publishes "+r(y(o.publishAt)),1)):c("",!0),o.expiresAt?(a(),i("span",Ge,"Expires "+r(y(o.expiresAt)),1)):c("",!0)])]),o.summary?(a(),i("p",ze,r(o.summary),1)):c("",!0),e("div",{class:"notice-preview__content",innerHTML:o.content},null,8,Je),e("footer",Ye,[t[21]||(t[21]=e("strong",null,"Audience:",-1)),M(" "+r(m.value),1)])])):c("",!0)]),_:1})]))}},Qe=V(Ke,[["__scopeId","data-v-472bb9bf"]]),We={class:"notice-detail"},Xe={class:"notice-detail__header"},Ze={class:"notice-detail__title"},et={key:0,class:"notice-detail__summary"},tt={class:"notice-detail__meta"},st={key:0,class:"badge badge--accent"},nt={key:1},lt={key:2},ot={key:0,class:"notice-detail__actions"},it=["href"],at=["action"],rt=["value"],dt=["innerHTML"],ut={key:0,class:"notice-detail__audience"},ct={__name:"NoticeDetailApp",props:{notice:{type:Object,required:!0},canManage:{type:Boolean,default:!1},csrfToken:{type:String,default:""}},setup(l){const d=l,u=P(!1);function f(v){return v?`badge--status-${v.toLowerCase()}`:"badge--status-draft"}function p(v,b=!1){if(!v)return"";const y=new Date(v);return Number.isNaN(y.getTime())?"":b?y.toLocaleDateString():y.toLocaleString()}function o(v){window.confirm("Delete this notice?")||v.preventDefault()}const k=T(()=>{const v=(d.notice.audiences||[]).map(b=>b.role?b.role.name:null).filter(Boolean);return v.length>0?v:["All roles"]});return(v,b)=>(a(),i("article",We,[e("header",Xe,[e("div",null,[e("h1",Ze,r(l.notice.title),1),l.notice.summary?(a(),i("p",et,r(l.notice.summary),1)):c("",!0),e("div",tt,[e("span",{class:D(["badge",f(l.notice.status)])},r(l.notice.status),3),l.notice.isPinned?(a(),i("span",st,"Pinned")):c("",!0),l.notice.publishAt?(a(),i("span",nt,"Published "+r(p(l.notice.publishAt)),1)):c("",!0),l.notice.expiresAt?(a(),i("span",lt,"Visible until "+r(p(l.notice.expiresAt,!0)),1)):c("",!0),e("button",{type:"button",class:"badge badge--ghost",onClick:b[0]||(b[0]=y=>u.value=!u.value)},r(u.value?"Hide":"Show")+" audience ",1)])]),l.canManage?(a(),i("div",ot,[e("a",{href:`/notices/${l.notice.id}/edit`,class:"btn"},"Edit",8,it),e("form",{method:"post",action:`/notices/${l.notice.id}/delete`,class:"form form--inline",onSubmit:o},[e("input",{type:"hidden",name:"_csrf",value:l.csrfToken},null,8,rt),b[1]||(b[1]=e("button",{type:"submit",class:"btn btn--danger"},"Delete",-1))],40,at)])):c("",!0)]),e("section",{class:"notice-detail__content",innerHTML:l.notice.content},null,8,dt),R(F,{name:"fade"},{default:O(()=>[u.value?(a(),i("section",ut,[b[2]||(b[2]=e("h2",null,"Audience",-1)),e("ul",null,[(a(!0),i(h,null,$(k.value,y=>(a(),i("li",{key:y},r(y),1))),128))])])):c("",!0)]),_:1})]))}},mt=V(ct,[["__scopeId","data-v-e7767016"]]),ft={class:"event-board"},_t={class:"event-board__header"},pt={class:"event-board__actions"},vt={class:"event-board__filters"},bt={class:"form__field"},yt={class:"form__field"},ht=["value"],$t={class:"form__field"},gt=["value"],At={class:"form__field"},kt={class:"form__field"},wt={key:0,class:"form__field form__field--checkbox"},Dt={class:"event-board__audience"},Nt={class:"chip-group"},St=["onClick"],xt={key:0,class:"event-board__cta"},Tt={key:0,class:"event-board__empty"},Et={key:1,class:"event-timeline"},Ct={class:"event-timeline__content"},Vt={class:"event-timeline__header"},Lt=["href"],Pt={class:"event-timeline__badges"},Ut={class:"badge badge--ghost"},It={key:0,class:"event-timeline__summary"},Mt={class:"event-timeline__meta"},Bt=["datetime"],Rt={key:0},Ot=["datetime"],Ft={key:1},jt={class:"event-timeline__footer"},Ht={key:0,class:"event-timeline__actions"},qt=["href"],Gt=["action"],zt=["value"],Jt={__name:"EventBoardApp",props:{events:{type:Array,default:()=>[]},lookups:{type:Object,default:()=>({statuses:[],visibilities:[],roles:[]})},filters:{type:Object,default:()=>({})},canManage:{type:Boolean,default:!1},csrfToken:{type:String,default:""}},setup(l){const d=l,u=E({search:d.filters.search||"",status:d.filters.status||"",visibility:d.filters.visibility||"",startAfter:d.filters.startAfter||"",startBefore:d.filters.startBefore||"",includePast:!!d.filters.includePast}),f=E(new Set((d.filters.audienceRoleIds||[]).map(Number)));function p(s){f.has(s)?f.delete(s):f.add(s)}function o(s){return s?`badge--status-${s.toLowerCase()}`:"badge--status-draft"}function k(s){const t=new Date(s);return Number.isNaN(t.getTime())?"":t.toISOString()}function v(s){const t=new Date(s);return Number.isNaN(t.getTime())?"":t.toLocaleString()}function b(s=[]){const t=s.map(n=>n.role?n.role.name:null).filter(Boolean);return t.length>0?t.join(", "):"All"}function y(s){window.confirm("Delete this event?")||s.preventDefault()}const m=T(()=>{const s=u.search.toLowerCase(),t=u.status,n=u.visibility,N=f.size>0?Array.from(f):null,S=new Date,x=u.startAfter?new Date(u.startAfter):null,U=u.startBefore?new Date(u.startBefore):null;return(d.events||[]).filter(A=>{if(s&&!`${A.title||""} ${A.location||""}`.toLowerCase().includes(s)||t&&A.status!==t||n&&A.visibility!==n)return!1;if(!u.includePast){const w=A.endAt?new Date(A.endAt):null,B=A.startAt?new Date(A.startAt):null;if(w?w<S:B&&B<S)return!1}if(x&&!Number.isNaN(x.getTime())){const w=new Date(A.startAt);if(!Number.isNaN(w.getTime())&&w<x)return!1}if(U&&!Number.isNaN(U.getTime())){const w=new Date(A.startAt);if(!Number.isNaN(w.getTime())&&w>U)return!1}if(N){const w=new Set((A.audiences||[]).map(I=>I.roleId));if(!N.some(I=>w.has(I)))return!1}return!0}).sort((A,w)=>new Date(A.startAt).getTime()-new Date(w.startAt).getTime())});return(s,t)=>(a(),i("section",ft,[e("header",_t,[t[16]||(t[16]=e("div",null,[e("h1",null,"Events"),e("p",null,"Explore upcoming happenings and revisit recently completed gatherings.")],-1)),e("div",pt,[e("div",vt,[e("label",bt,[t[6]||(t[6]=e("span",{class:"form__label"},"Search",-1)),_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>u.search=n),type:"search",placeholder:"Title or location"},null,512),[[g,u.search,void 0,{trim:!0}]])]),e("label",yt,[t[8]||(t[8]=e("span",{class:"form__label"},"Status",-1)),_(e("select",{"onUpdate:modelValue":t[1]||(t[1]=n=>u.status=n)},[t[7]||(t[7]=e("option",{value:""},"All",-1)),(a(!0),i(h,null,$(l.lookups.statuses,n=>(a(),i("option",{key:n,value:n},r(n),9,ht))),128))],512),[[C,u.status]])]),e("label",$t,[t[10]||(t[10]=e("span",{class:"form__label"},"Visibility",-1)),_(e("select",{"onUpdate:modelValue":t[2]||(t[2]=n=>u.visibility=n)},[t[9]||(t[9]=e("option",{value:""},"All",-1)),(a(!0),i(h,null,$(l.lookups.visibilities,n=>(a(),i("option",{key:n,value:n},r(n),9,gt))),128))],512),[[C,u.visibility]])]),e("label",At,[t[11]||(t[11]=e("span",{class:"form__label"},"Start from",-1)),_(e("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>u.startAfter=n),type:"date"},null,512),[[g,u.startAfter]])]),e("label",kt,[t[12]||(t[12]=e("span",{class:"form__label"},"Start to",-1)),_(e("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>u.startBefore=n),type:"date"},null,512),[[g,u.startBefore]])]),l.canManage?(a(),i("label",wt,[_(e("input",{"onUpdate:modelValue":t[5]||(t[5]=n=>u.includePast=n),type:"checkbox"},null,512),[[L,u.includePast]]),t[13]||(t[13]=e("span",null,"Include past",-1))])):c("",!0)]),e("div",Dt,[t[14]||(t[14]=e("span",{class:"form__label"},"Audience",-1)),e("div",Nt,[(a(!0),i(h,null,$(l.lookups.roles,n=>(a(),i("button",{key:n.id,type:"button",class:D(["chip",{"chip--active":f.has(n.id)}]),onClick:N=>p(n.id)},r(n.name),11,St))),128))])]),l.canManage?(a(),i("div",xt,[...t[15]||(t[15]=[e("a",{class:"btn btn--primary",href:"/events/create"},"New event",-1)])])):c("",!0)])]),m.value.length===0?(a(),i("div",Tt,[...t[17]||(t[17]=[e("p",null,"No events match your filters.",-1)])])):(a(),i("ol",Et,[(a(!0),i(h,null,$(m.value,n=>(a(),i("li",{key:n.id,class:"event-timeline__item"},[t[23]||(t[23]=e("div",{class:"event-timeline__marker"},null,-1)),e("div",Ct,[e("header",Vt,[e("h2",null,[e("a",{href:`/events/${n.id}`},r(n.title),9,Lt)]),e("div",Pt,[e("span",{class:D(["badge",o(n.status)])},r(n.status),3),e("span",Ut,r(n.visibility),1)])]),n.summary?(a(),i("p",It,r(n.summary),1)):c("",!0),e("dl",Mt,[e("div",null,[t[18]||(t[18]=e("dt",null,"Starts",-1)),e("dd",null,[e("time",{datetime:k(n.startAt)},r(v(n.startAt)),9,Bt)])]),n.endAt?(a(),i("div",Rt,[t[19]||(t[19]=e("dt",null,"Ends",-1)),e("dd",null,[e("time",{datetime:k(n.endAt)},r(v(n.endAt)),9,Ot)])])):c("",!0),n.location?(a(),i("div",Ft,[t[20]||(t[20]=e("dt",null,"Location",-1)),e("dd",null,r(n.location),1)])):c("",!0)]),e("footer",jt,[e("span",null,[t[21]||(t[21]=e("strong",null,"Audience:",-1)),M(" "+r(b(n.audiences)),1)]),l.canManage?(a(),i("div",Ht,[e("a",{href:`/events/${n.id}/edit`,class:"btn btn--small"},"Edit",8,qt),e("form",{method:"post",action:`/events/${n.id}/delete`,class:"form form--inline",onSubmit:y},[e("input",{type:"hidden",name:"_csrf",value:l.csrfToken},null,8,zt),t[22]||(t[22]=e("button",{type:"submit",class:"btn btn--small btn--danger"},"Delete",-1))],40,Gt)])):c("",!0)])])]))),128))]))]))}},Yt=V(Jt,[["__scopeId","data-v-4fc9a85e"]]),Kt={class:"card card--form"},Qt={class:"card__header"},Wt={class:"card__title"},Xt={key:0,class:"alert alert--danger",role:"alert"},Zt=["action"],es=["value"],ts={class:"form__field"},ss={class:"form__field"},ns={class:"form__field form__field--full"},ls={class:"form__grid"},os={class:"form__field"},is={class:"form__field"},as=["value"],rs={class:"form__field"},ds=["value"],us={class:"form__field form__field--checkbox"},cs={class:"form__grid"},ms={class:"form__field"},fs={class:"form__field"},_s={class:"form__field"},ps={class:"form__field"},vs={class:"form__fieldset"},bs={class:"form__checkbox-grid"},ys=["value"],hs={class:"form__actions"},$s={type:"submit",class:"btn btn--primary"},gs={key:0,class:"event-preview"},As={class:"event-preview__header"},ks={key:0,class:"event-preview__summary"},ws={class:"event-preview__badges"},Ds={class:"badge badge--ghost"},Ns={class:"event-preview__meta"},Ss={key:0},xs={key:0,class:"event-preview__description"},Ts={class:"event-preview__footer"},Es={__name:"EventFormApp",props:{lookups:{type:Object,default:()=>({statuses:[],visibilities:[],roles:[]})},values:{type:Object,default:()=>({})},errors:{type:Array,default:()=>[]},isEditMode:{type:Boolean,default:!1},eventId:{type:Number,default:null},csrfToken:{type:String,default:""},formAction:{type:String,default:"/events/create"}},setup(l){const d=l,u=T(()=>d.errors||[]),f=P(null),p=P(!1),o=E({title:d.values.title||"",summary:d.values.summary||"",description:d.values.description||"",location:d.values.location||"",status:d.values.status||"",visibility:d.values.visibility||"",isAllDay:!!d.values.isAllDay,startAt:d.values.startAt||"",endAt:d.values.endAt||"",publishAt:d.values.publishAt||"",registrationDeadline:d.values.registrationDeadline||"",audienceRoleIds:(d.values.audienceRoleIds||[]).map(s=>String(s))});function k(){var s;(s=f.value)==null||s.submit()}function v(){p.value=!p.value}function b(s){return s?`badge--status-${s.toLowerCase()}`:"badge--status-draft"}function y(s){if(!s)return"";const t=new Date(s);return Number.isNaN(t.getTime())?"":t.toLocaleString()}const m=T(()=>{const s=d.lookups.roles.filter(t=>o.audienceRoleIds.includes(String(t.id))).map(t=>t.name);return s.length>0?s.join(", "):"All"});return(s,t)=>(a(),i("section",Kt,[e("header",Qt,[e("div",null,[e("h1",Wt,r(l.isEditMode?"Edit event":"Create event"),1),t[12]||(t[12]=e("p",{class:"card__subtitle"},"Plan gatherings, workshops, and celebrations with clarity.",-1))]),t[13]||(t[13]=e("a",{class:"btn btn--ghost",href:"/events"},"Back to events",-1))]),u.value.length?(a(),i("div",Xt,[t[14]||(t[14]=e("p",null,[e("strong",null,"Please review the following:")],-1)),e("ul",null,[(a(!0),i(h,null,$(u.value,n=>(a(),i("li",{key:n},r(n),1))),128))])])):c("",!0),e("form",{ref_key:"formRef",ref:f,method:"post",action:l.formAction,class:"form",onSubmit:j(k,["prevent"])},[e("input",{type:"hidden",name:"_csrf",value:l.csrfToken},null,8,es),e("label",ts,[t[15]||(t[15]=e("span",{class:"form__label"},"Title *",-1)),_(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>o.title=n),type:"text",name:"title",required:""},null,512),[[g,o.title,void 0,{trim:!0}]])]),e("label",ss,[t[16]||(t[16]=e("span",{class:"form__label"},"Summary",-1)),_(e("textarea",{"onUpdate:modelValue":t[1]||(t[1]=n=>o.summary=n),name:"summary",rows:"2"},null,512),[[g,o.summary,void 0,{trim:!0}]])]),e("label",ns,[t[17]||(t[17]=e("span",{class:"form__label"},"Description",-1)),_(e("textarea",{"onUpdate:modelValue":t[2]||(t[2]=n=>o.description=n),name:"description",rows:"6"},null,512),[[g,o.description]])]),e("div",ls,[e("label",os,[t[18]||(t[18]=e("span",{class:"form__label"},"Location",-1)),_(e("input",{"onUpdate:modelValue":t[3]||(t[3]=n=>o.location=n),type:"text",name:"location"},null,512),[[g,o.location,void 0,{trim:!0}]])]),e("label",is,[t[20]||(t[20]=e("span",{class:"form__label"},"Status",-1)),_(e("select",{"onUpdate:modelValue":t[4]||(t[4]=n=>o.status=n),name:"status"},[t[19]||(t[19]=e("option",{value:""},"Draft",-1)),(a(!0),i(h,null,$(l.lookups.statuses,n=>(a(),i("option",{key:n,value:n},r(n),9,as))),128))],512),[[C,o.status]])]),e("label",rs,[t[22]||(t[22]=e("span",{class:"form__label"},"Visibility",-1)),_(e("select",{"onUpdate:modelValue":t[5]||(t[5]=n=>o.visibility=n),name:"visibility"},[t[21]||(t[21]=e("option",{value:""},"Internal",-1)),(a(!0),i(h,null,$(l.lookups.visibilities,n=>(a(),i("option",{key:n,value:n},r(n),9,ds))),128))],512),[[C,o.visibility]])]),e("label",us,[_(e("input",{"onUpdate:modelValue":t[6]||(t[6]=n=>o.isAllDay=n),type:"checkbox",name:"isAllDay",value:"true"},null,512),[[L,o.isAllDay]]),t[23]||(t[23]=e("span",null,"All-day event",-1))])]),e("div",cs,[e("label",ms,[t[24]||(t[24]=e("span",{class:"form__label"},"Starts *",-1)),_(e("input",{"onUpdate:modelValue":t[7]||(t[7]=n=>o.startAt=n),type:"datetime-local",name:"startAt",required:""},null,512),[[g,o.startAt]])]),e("label",fs,[t[25]||(t[25]=e("span",{class:"form__label"},"Ends",-1)),_(e("input",{"onUpdate:modelValue":t[8]||(t[8]=n=>o.endAt=n),type:"datetime-local",name:"endAt"},null,512),[[g,o.endAt]])]),e("label",_s,[t[26]||(t[26]=e("span",{class:"form__label"},"Publish at",-1)),_(e("input",{"onUpdate:modelValue":t[9]||(t[9]=n=>o.publishAt=n),type:"datetime-local",name:"publishAt"},null,512),[[g,o.publishAt]])]),e("label",ps,[t[27]||(t[27]=e("span",{class:"form__label"},"Registration deadline",-1)),_(e("input",{"onUpdate:modelValue":t[10]||(t[10]=n=>o.registrationDeadline=n),type:"datetime-local",name:"registrationDeadline"},null,512),[[g,o.registrationDeadline]])])]),e("fieldset",vs,[t[28]||(t[28]=e("legend",{class:"form__legend"},"Audience",-1)),t[29]||(t[29]=e("p",{class:"form__hint"},"Select the groups invited to attend.",-1)),e("div",bs,[(a(!0),i(h,null,$(l.lookups.roles,n=>(a(),i("label",{key:n.id,class:"form__checkbox"},[_(e("input",{type:"checkbox",name:"audienceRoleIds",value:n.id,"onUpdate:modelValue":t[11]||(t[11]=N=>o.audienceRoleIds=N)},null,8,ys),[[L,o.audienceRoleIds]]),e("span",null,r(n.name),1)]))),128))])]),e("div",hs,[e("button",$s,r(l.isEditMode?"Save changes":"Create event"),1),e("button",{type:"button",class:"btn btn--ghost",onClick:v},r(p.value?"Hide preview":"Preview"),1)])],40,Zt),R(F,{name:"fade"},{default:O(()=>[p.value?(a(),i("section",gs,[e("header",As,[e("div",null,[e("h2",null,r(o.title||"Untitled event"),1),o.summary?(a(),i("p",ks,r(o.summary),1)):c("",!0)]),e("div",ws,[e("span",{class:D(["badge",b(o.status)])},r(o.status||"DRAFT"),3),e("span",Ds,r(o.visibility||"INTERNAL"),1)])]),e("dl",Ns,[e("div",null,[t[30]||(t[30]=e("dt",null,"Starts",-1)),e("dd",null,r(y(o.startAt)||"—"),1)]),e("div",null,[t[31]||(t[31]=e("dt",null,"Ends",-1)),e("dd",null,r(y(o.endAt)||"—"),1)]),o.location?(a(),i("div",Ss,[t[32]||(t[32]=e("dt",null,"Location",-1)),e("dd",null,r(o.location),1)])):c("",!0)]),o.description?(a(),i("article",xs,r(o.description),1)):c("",!0),e("footer",Ts,[t[33]||(t[33]=e("strong",null,"Audience:",-1)),M(" "+r(m.value),1)])])):c("",!0)]),_:1})]))}},Cs=V(Es,[["__scopeId","data-v-c272f2ed"]]),Vs={class:"event-detail"},Ls={class:"event-detail__header"},Ps={class:"event-detail__title"},Us={key:0,class:"event-detail__summary"},Is={class:"event-detail__meta"},Ms={class:"badge badge--ghost"},Bs={key:0},Rs={key:1},Os={key:0,class:"event-detail__actions"},Fs=["href"],js=["action"],Hs=["value"],qs={class:"event-detail__content"},Gs={key:0,class:"event-detail__location"},zs=["innerHTML"],Js={class:"event-detail__schedule"},Ys=["datetime"],Ks={key:0},Qs=["datetime"],Ws={key:1},Xs={key:0,class:"event-detail__audience"},Zs={class:"event-detail__rsvp"},en=["action"],tn=["value"],sn={class:"form__field"},nn=["value"],ln={class:"form__field"},on=["action"],an=["value"],rn={__name:"EventDetailApp",props:{event:{type:Object,required:!0},registration:{type:Object,default:null},lookups:{type:Object,default:()=>({rsvpStatuses:["GOING","INTERESTED","DECLINED"]})},canManage:{type:Boolean,default:!1},csrfToken:{type:String,default:""}},setup(l){var y;const d=l,u=P(null),f=E({status:d.registration&&d.registration.status||((y=d.lookups.rsvpStatuses)==null?void 0:y[0])||"GOING",notes:d.registration&&d.registration.notes||""});function p(m){return m?`badge--status-${m.toLowerCase()}`:"badge--status-draft"}function o(m,s=!1){if(!m)return"";const t=new Date(m);return Number.isNaN(t.getTime())?"":s?t.toLocaleDateString():t.toLocaleString()}function k(m){const s=new Date(m);return Number.isNaN(s.getTime())?"":s.toISOString()}function v(m){window.confirm("Delete this event?")||m.preventDefault()}const b=T(()=>{const m=(d.event.audiences||[]).map(s=>s.role?s.role.name:null).filter(Boolean);return m.length>0?m:["All roles"]});return(m,s)=>(a(),i("article",Vs,[e("header",Ls,[e("div",null,[e("h1",Ps,r(l.event.title),1),l.event.summary?(a(),i("p",Us,r(l.event.summary),1)):c("",!0),e("div",Is,[e("span",{class:D(["badge",p(l.event.status)])},r(l.event.status),3),e("span",Ms,r(l.event.visibility),1),l.event.startAt?(a(),i("span",Bs,"Starts "+r(o(l.event.startAt)),1)):c("",!0),l.event.endAt?(a(),i("span",Rs,"Ends "+r(o(l.event.endAt)),1)):c("",!0)])]),l.canManage?(a(),i("div",Os,[e("a",{href:`/events/${l.event.id}/edit`,class:"btn"},"Edit",8,Fs),e("form",{method:"post",action:`/events/${l.event.id}/delete`,class:"form form--inline",onSubmit:v},[e("input",{type:"hidden",name:"_csrf",value:l.csrfToken},null,8,Hs),s[2]||(s[2]=e("button",{type:"submit",class:"btn btn--danger"},"Delete",-1))],40,js)])):c("",!0)]),e("section",qs,[l.event.location?(a(),i("p",Gs,[s[3]||(s[3]=M("📍 ",-1)),e("strong",null,r(l.event.location),1)])):c("",!0),l.event.description?(a(),i("article",{key:1,class:"event-detail__description",innerHTML:l.event.description},null,8,zs)):c("",!0),e("dl",Js,[e("div",null,[s[4]||(s[4]=e("dt",null,"Starts",-1)),e("dd",null,[e("time",{datetime:k(l.event.startAt)},r(o(l.event.startAt)),9,Ys)])]),l.event.endAt?(a(),i("div",Ks,[s[5]||(s[5]=e("dt",null,"Ends",-1)),e("dd",null,[e("time",{datetime:k(l.event.endAt)},r(o(l.event.endAt)),9,Qs)])])):c("",!0),l.event.registrationDeadline?(a(),i("div",Ws,[s[6]||(s[6]=e("dt",null,"RSVP by",-1)),e("dd",null,r(o(l.event.registrationDeadline,!0)),1)])):c("",!0)])]),l.event.audiences&&l.event.audiences.length?(a(),i("section",Xs,[s[7]||(s[7]=e("h2",null,"Audience",-1)),e("ul",null,[(a(!0),i(h,null,$(b.value,t=>(a(),i("li",{key:t},r(t),1))),128))])])):c("",!0),e("section",Zs,[s[12]||(s[12]=e("h2",null,"Your RSVP",-1)),e("form",{ref_key:"rsvpForm",ref:u,method:"post",action:`/events/${l.event.id}/rsvp`,class:"form form--stacked"},[e("input",{type:"hidden",name:"_csrf",value:l.csrfToken},null,8,tn),e("label",sn,[s[8]||(s[8]=e("span",{class:"form__label"},"Response",-1)),_(e("select",{"onUpdate:modelValue":s[0]||(s[0]=t=>f.status=t),name:"status"},[(a(!0),i(h,null,$(l.lookups.rsvpStatuses,t=>(a(),i("option",{key:t,value:t},r(t),9,nn))),128))],512),[[C,f.status]])]),e("label",ln,[s[9]||(s[9]=e("span",{class:"form__label"},"Notes",-1)),_(e("textarea",{"onUpdate:modelValue":s[1]||(s[1]=t=>f.notes=t),name:"notes",rows:"2"},null,512),[[g,f.notes]])]),s[10]||(s[10]=e("div",{class:"form__actions"},[e("button",{type:"submit",class:"btn btn--primary"},"Save response")],-1))],8,en),l.registration?(a(),i("form",{key:0,method:"post",action:`/events/${l.event.id}/rsvp/cancel`,class:"form form--inline event-detail__cancel"},[e("input",{type:"hidden",name:"_csrf",value:l.csrfToken},null,8,an),s[11]||(s[11]=e("button",{type:"submit",class:"btn btn--link"},"Cancel RSVP",-1))],8,on)):c("",!0)])]))}},dn=V(rn,[["__scopeId","data-v-0c3cfa07"]]),un={class:"dashboard-communications"},cn={class:"dashboard-panel"},mn={key:0,class:"dashboard-panel__empty"},fn={key:1,class:"dashboard-list"},_n=["href"],pn={key:0,class:"dashboard-list__summary"},vn={class:"dashboard-list__meta"},bn={key:0},yn={class:"dashboard-panel"},hn={key:0,class:"dashboard-panel__empty"},$n={key:1,class:"dashboard-list"},gn=["href"],An={key:0,class:"dashboard-list__summary"},kn={class:"dashboard-list__meta"},wn={__name:"DashboardCommunicationsApp",props:{notices:{type:Array,default:()=>[]},events:{type:Array,default:()=>[]}},setup(l){function d(f){return f?`badge--status-${f.toLowerCase()}`:"badge--status-draft"}function u(f){if(!f)return"";const p=new Date(f);return Number.isNaN(p.getTime())?"":p.toLocaleDateString()}return(f,p)=>(a(),i("div",un,[e("section",cn,[p[0]||(p[0]=e("header",{class:"dashboard-panel__header"},[e("h2",null,"Latest notices"),e("a",{class:"dashboard-panel__link",href:"/notices"},"View all")],-1)),l.notices.length===0?(a(),i("p",mn,"No recent notices.")):(a(),i("ul",fn,[(a(!0),i(h,null,$(l.notices,o=>(a(),i("li",{key:o.id,class:"dashboard-list__item"},[e("a",{href:`/notices/${o.id}`,class:"dashboard-list__title"},r(o.title),9,_n),o.summary?(a(),i("p",pn,r(o.summary),1)):c("",!0),e("div",vn,[e("span",{class:D(["badge",d(o.status)])},r(o.status),3),o.publishAt?(a(),i("span",bn,r(u(o.publishAt)),1)):c("",!0)])]))),128))]))]),e("section",yn,[p[1]||(p[1]=e("header",{class:"dashboard-panel__header"},[e("h2",null,"Upcoming events"),e("a",{class:"dashboard-panel__link",href:"/events"},"View calendar")],-1)),l.events.length===0?(a(),i("p",hn,"No upcoming events.")):(a(),i("ul",$n,[(a(!0),i(h,null,$(l.events,o=>(a(),i("li",{key:o.id,class:"dashboard-list__item"},[e("a",{href:`/events/${o.id}`,class:"dashboard-list__title"},r(o.title),9,gn),o.summary?(a(),i("p",An,r(o.summary),1)):c("",!0),e("div",kn,[e("span",{class:D(["badge",d(o.status)])},r(o.status),3),e("span",null,r(u(o.startAt)),1)])]))),128))]))])]))}},Dn=V(wn,[["__scopeId","data-v-9c0c44e5"]]),Nn={NoticeCenterApp:$e,NoticeFormApp:Qe,NoticeDetailApp:mt,EventBoardApp:Yt,EventFormApp:Cs,EventDetailApp:dn,DashboardCommunicationsApp:Dn};function Sn(l){if(!l)return{};const d=document.getElementById(l);if(!d)return{};try{return JSON.parse(d.textContent||"{}")}catch(u){return console.warn(`Unable to parse state for ${l}`,u),{}}}function xn(l){const d=l.dataset.vueApp,u=Nn[d];if(!u)return;const f=Sn(l.dataset.stateId);H(u,f).mount(l)}document.querySelectorAll("[data-vue-app]").forEach(l=>xn(l));
//# sourceMappingURL=communications.js.map

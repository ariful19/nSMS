{"version":3,"file":"academic.js","sources":["../../client/academic/components/ClassManagementApp.vue","../../client/academic/components/ClassDetailApp.vue","../../client/academic/components/GradeEntryApp.vue","../../client/academic/components/GradeReportApp.vue","../../client/academic/main.js"],"sourcesContent":["<template>\n  <section class=\"grid grid--two-column\">\n    <article class=\"card card--interactive\">\n      <header class=\"card__header\">\n        <div>\n          <h1 class=\"card__title\">Classes</h1>\n          <p class=\"card__subtitle\">\n            {{ filteredClasses.length }} class{{ filteredClasses.length === 1 ? \"\" : \"es\" }}\n            visible\n          </p>\n        </div>\n        <div class=\"card__actions\">\n          <label class=\"toggle\">\n            <input type=\"checkbox\" v-model=\"showArchivedClasses\" />\n            <span>Show archived</span>\n          </label>\n        </div>\n      </header>\n\n      <form class=\"form\" @submit.prevent=\"submitClassForm\" novalidate>\n        <div v-if=\"classErrors.length\" class=\"alert alert--danger\">\n          <p>Unable to save the class:</p>\n          <ul>\n            <li v-for=\"error in classErrors\" :key=\"error\">{{ error }}</li>\n          </ul>\n        </div>\n\n        <label class=\"form__group\">\n          <span>Name</span>\n          <input v-model.trim=\"classForm.name\" type=\"text\" required />\n        </label>\n        <label class=\"form__group\">\n          <span>Code</span>\n          <input v-model.trim=\"classForm.code\" type=\"text\" />\n        </label>\n        <label class=\"form__group\">\n          <span>Grade level</span>\n          <select v-model=\"classForm.gradeLevelId\">\n            <option value=\"\">Select grade</option>\n            <option\n              v-for=\"grade in lookups.gradeLevels\"\n              :key=\"grade.id\"\n              :value=\"String(grade.id)\"\n            >\n              {{ grade.name }}\n            </option>\n          </select>\n        </label>\n        <label class=\"form__group\">\n          <span>Homeroom teacher</span>\n          <select v-model=\"classForm.homeroomTeacherId\">\n            <option value=\"\">Unassigned</option>\n            <option\n              v-for=\"teacher in lookups.teachers\"\n              :key=\"teacher.id\"\n              :value=\"String(teacher.id)\"\n            >\n              {{ teacher.name }}\n            </option>\n          </select>\n        </label>\n        <div class=\"form__row\">\n          <label class=\"form__group\">\n            <span>Start date</span>\n            <input v-model=\"classForm.startDate\" type=\"date\" />\n          </label>\n          <label class=\"form__group\">\n            <span>End date</span>\n            <input v-model=\"classForm.endDate\" type=\"date\" />\n          </label>\n        </div>\n        <label class=\"form__group\">\n          <span>Description</span>\n          <textarea v-model.trim=\"classForm.description\" rows=\"2\"></textarea>\n        </label>\n        <div class=\"form__actions\">\n          <button type=\"submit\" class=\"btn\" :disabled=\"isSavingClass\">\n            {{ classEditingId ? \"Update class\" : \"Create class\" }}\n          </button>\n          <button\n            v-if=\"classEditingId\"\n            type=\"button\"\n            class=\"btn btn--ghost\"\n            @click=\"resetClassForm\"\n          >\n            Cancel edit\n          </button>\n        </div>\n      </form>\n\n      <div class=\"table-responsive\">\n        <table class=\"table\">\n          <thead>\n            <tr>\n              <th scope=\"col\">Name</th>\n              <th scope=\"col\">Grade</th>\n              <th scope=\"col\">Students</th>\n              <th scope=\"col\">Subjects</th>\n              <th scope=\"col\">Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"classroom in filteredClasses\" :key=\"classroom.id\">\n              <td data-title=\"Name\">\n                <div class=\"table__title\">\n                  <a :href=\"`/classes/${classroom.id}`\">{{ classroom.name }}</a>\n                </div>\n                <div class=\"table__meta\">\n                  <span v-if=\"classroom.homeroomTeacher\">\n                    Homeroom: {{ classroom.homeroomTeacher.name }}\n                  </span>\n                  <span v-if=\"classroom.isArchived\" class=\"badge badge--warning\">\n                    Archived\n                  </span>\n                </div>\n              </td>\n              <td data-title=\"Grade\">{{ classroom.gradeLevel?.name ?? \"â€”\" }}</td>\n              <td data-title=\"Students\">{{ classroom.studentCount }}</td>\n              <td data-title=\"Subjects\">{{ classroom.subjectCount }}</td>\n              <td class=\"table__actions\">\n                <button\n                  type=\"button\"\n                  class=\"btn btn--small\"\n                  @click=\"beginClassEdit(classroom)\"\n                >\n                  Edit\n                </button>\n                <a\n                  class=\"btn btn--small btn--ghost\"\n                  :href=\"`/classes/${classroom.id}`\"\n                >\n                  Open\n                </a>\n                <button\n                  v-if=\"!classroom.isArchived\"\n                  type=\"button\"\n                  class=\"btn btn--small btn--danger\"\n                  @click=\"archiveClass(classroom)\"\n                >\n                  Archive\n                </button>\n                <button\n                  v-else\n                  type=\"button\"\n                  class=\"btn btn--small\"\n                  @click=\"restoreClass(classroom)\"\n                >\n                  Restore\n                </button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </article>\n\n    <article class=\"card card--interactive\">\n      <header class=\"card__header\">\n        <div>\n          <h2 class=\"card__title\">Subjects</h2>\n          <p class=\"card__subtitle\">\n            {{ visibleSubjects.length }} subject{{ visibleSubjects.length === 1 ? \"\" : \"s\" }} in catalogue\n          </p>\n        </div>\n        <div class=\"card__actions\">\n          <label class=\"toggle\">\n            <input type=\"checkbox\" v-model=\"showArchivedSubjects\" />\n            <span>Show archived</span>\n          </label>\n        </div>\n      </header>\n\n      <form class=\"form\" @submit.prevent=\"submitSubjectForm\" novalidate>\n        <div v-if=\"subjectErrors.length\" class=\"alert alert--danger\">\n          <p>Unable to save the subject:</p>\n          <ul>\n            <li v-for=\"error in subjectErrors\" :key=\"error\">{{ error }}</li>\n          </ul>\n        </div>\n        <label class=\"form__group\">\n          <span>Name</span>\n          <input v-model.trim=\"subjectForm.name\" type=\"text\" required />\n        </label>\n        <label class=\"form__group\">\n          <span>Code</span>\n          <input v-model.trim=\"subjectForm.code\" type=\"text\" />\n        </label>\n        <label class=\"form__group\">\n          <span>Description</span>\n          <textarea v-model.trim=\"subjectForm.description\" rows=\"2\"></textarea>\n        </label>\n        <div class=\"form__actions\">\n          <button type=\"submit\" class=\"btn\" :disabled=\"isSavingSubject\">\n            {{ subjectEditingId ? \"Update subject\" : \"Create subject\" }}\n          </button>\n          <button\n            v-if=\"subjectEditingId\"\n            type=\"button\"\n            class=\"btn btn--ghost\"\n            @click=\"resetSubjectForm\"\n          >\n            Cancel edit\n          </button>\n        </div>\n      </form>\n\n      <ul class=\"list\">\n        <li v-for=\"subject in visibleSubjects\" :key=\"subject.id\">\n          <div class=\"list__heading\">\n            <strong>{{ subject.name }}</strong>\n            <span v-if=\"subject.code\" class=\"badge badge--neutral\">{{ subject.code }}</span>\n            <span v-if=\"subject.isArchived\" class=\"badge badge--warning\">Archived</span>\n          </div>\n          <p class=\"list__description\" v-if=\"subject.description\">\n            {{ subject.description }}\n          </p>\n          <div class=\"list__meta\">\n            <span>Linked classes: {{ subject.classCount }}</span>\n          </div>\n          <div class=\"list__actions\">\n            <button type=\"button\" class=\"btn btn--small\" @click=\"beginSubjectEdit(subject)\">\n              Edit\n            </button>\n            <button\n              v-if=\"!subject.isArchived\"\n              type=\"button\"\n              class=\"btn btn--small btn--danger\"\n              @click=\"archiveSubject(subject)\"\n            >\n              Archive\n            </button>\n            <button\n              v-else\n              type=\"button\"\n              class=\"btn btn--small\"\n              @click=\"restoreSubject(subject)\"\n            >\n              Restore\n            </button>\n          </div>\n        </li>\n      </ul>\n    </article>\n  </section>\n</template>\n\n<script setup>\nimport { computed, reactive, ref } from \"vue\";\n\nconst props = defineProps({\n  classes: { type: Array, default: () => [] },\n  subjects: { type: Array, default: () => [] },\n  lookups: {\n    type: Object,\n    default: () => ({ gradeLevels: [], teachers: [] }),\n  },\n  csrfToken: { type: String, default: \"\" },\n});\n\nconst classes = ref([...props.classes]);\nconst subjects = ref([...props.subjects]);\nconst lookups = reactive({\n  gradeLevels: props.lookups?.gradeLevels ?? [],\n  teachers: props.lookups?.teachers ?? [],\n});\n\nconst showArchivedClasses = ref(false);\nconst showArchivedSubjects = ref(false);\n\nconst classForm = reactive({\n  name: \"\",\n  code: \"\",\n  gradeLevelId: \"\",\n  homeroomTeacherId: \"\",\n  startDate: \"\",\n  endDate: \"\",\n  description: \"\",\n});\nconst classErrors = ref([]);\nconst classEditingId = ref(null);\nconst isSavingClass = ref(false);\n\nconst subjectForm = reactive({\n  name: \"\",\n  code: \"\",\n  description: \"\",\n});\nconst subjectErrors = ref([]);\nconst subjectEditingId = ref(null);\nconst isSavingSubject = ref(false);\n\nconst filteredClasses = computed(() => {\n  if (showArchivedClasses.value) {\n    return classes.value;\n  }\n  return classes.value.filter((classroom) => !classroom.isArchived);\n});\n\nconst visibleSubjects = computed(() => {\n  if (showArchivedSubjects.value) {\n    return subjects.value;\n  }\n  return subjects.value.filter((subject) => !subject.isArchived);\n});\n\nfunction resetClassForm() {\n  classForm.name = \"\";\n  classForm.code = \"\";\n  classForm.gradeLevelId = \"\";\n  classForm.homeroomTeacherId = \"\";\n  classForm.startDate = \"\";\n  classForm.endDate = \"\";\n  classForm.description = \"\";\n  classEditingId.value = null;\n  classErrors.value = [];\n}\n\nfunction beginClassEdit(classroom) {\n  classForm.name = classroom.name || \"\";\n  classForm.code = classroom.code || \"\";\n  classForm.gradeLevelId = classroom.gradeLevel ? String(classroom.gradeLevel.id) : \"\";\n  classForm.homeroomTeacherId = classroom.homeroomTeacher\n    ? String(classroom.homeroomTeacher.id)\n    : \"\";\n  classForm.startDate = classroom.startDate ? classroom.startDate.slice(0, 10) : \"\";\n  classForm.endDate = classroom.endDate ? classroom.endDate.slice(0, 10) : \"\";\n  classForm.description = classroom.description || \"\";\n  classEditingId.value = classroom.id;\n  classErrors.value = [];\n}\n\nfunction resetSubjectForm() {\n  subjectForm.name = \"\";\n  subjectForm.code = \"\";\n  subjectForm.description = \"\";\n  subjectEditingId.value = null;\n  subjectErrors.value = [];\n}\n\nfunction beginSubjectEdit(subject) {\n  subjectForm.name = subject.name || \"\";\n  subjectForm.code = subject.code || \"\";\n  subjectForm.description = subject.description || \"\";\n  subjectEditingId.value = subject.id;\n  subjectErrors.value = [];\n}\n\nasync function refreshManagementState() {\n  const response = await fetch(\"/classes\", {\n    headers: { Accept: \"application/json\" },\n  });\n  if (!response.ok) {\n    throw new Error(\"Failed to refresh data\");\n  }\n  const data = await response.json();\n  classes.value = data.management.classes || [];\n  subjects.value = data.management.subjects || [];\n  if (data.management.lookups) {\n    lookups.gradeLevels = data.management.lookups.gradeLevels || lookups.gradeLevels;\n    lookups.teachers = data.management.lookups.teachers || lookups.teachers;\n  }\n}\n\nasync function submitClassForm() {\n  classErrors.value = [];\n  if (!classForm.name) {\n    classErrors.value.push(\"Class name is required.\");\n    return;\n  }\n\n  isSavingClass.value = true;\n  try {\n    const url = classEditingId.value\n      ? `/classes/${classEditingId.value}/update`\n      : \"/classes\";\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        \"X-CSRF-Token\": props.csrfToken,\n      },\n      body: JSON.stringify(classForm),\n    });\n    const data = await response.json().catch(() => ({}));\n    if (!response.ok) {\n      classErrors.value = data.errors || [data.message || \"Unable to save class.\"];\n      return;\n    }\n    await refreshManagementState();\n    resetClassForm();\n  } catch (error) {\n    classErrors.value = [error.message || \"Unexpected error saving class.\"];\n  } finally {\n    isSavingClass.value = false;\n  }\n}\n\nasync function archiveClass(classroom) {\n  await mutateClass(`/classes/${classroom.id}/archive`);\n}\n\nasync function restoreClass(classroom) {\n  await mutateClass(`/classes/${classroom.id}/restore`);\n}\n\nasync function mutateClass(url) {\n  try {\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"X-CSRF-Token\": props.csrfToken,\n      },\n    });\n    if (!response.ok) {\n      const data = await response.json().catch(() => ({}));\n      throw new Error(data.message || \"Unable to update class\");\n    }\n    await refreshManagementState();\n  } catch (error) {\n    classErrors.value = [error.message || \"Unable to update class.\"];\n  }\n}\n\nasync function submitSubjectForm() {\n  subjectErrors.value = [];\n  if (!subjectForm.name) {\n    subjectErrors.value.push(\"Subject name is required.\");\n    return;\n  }\n\n  isSavingSubject.value = true;\n  try {\n    const url = subjectEditingId.value\n      ? `/classes/subjects/${subjectEditingId.value}/update`\n      : \"/classes/subjects\";\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        \"X-CSRF-Token\": props.csrfToken,\n      },\n      body: JSON.stringify(subjectForm),\n    });\n    const data = await response.json().catch(() => ({}));\n    if (!response.ok) {\n      subjectErrors.value = data.errors || [data.message || \"Unable to save subject.\"];\n      return;\n    }\n    await refreshManagementState();\n    resetSubjectForm();\n  } catch (error) {\n    subjectErrors.value = [error.message || \"Unexpected error saving subject.\"];\n  } finally {\n    isSavingSubject.value = false;\n  }\n}\n\nasync function archiveSubject(subject) {\n  await mutateSubject(`/classes/subjects/${subject.id}/archive`);\n}\n\nasync function restoreSubject(subject) {\n  await mutateSubject(`/classes/subjects/${subject.id}/restore`);\n}\n\nasync function mutateSubject(url) {\n  try {\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"X-CSRF-Token\": props.csrfToken,\n      },\n    });\n    if (!response.ok) {\n      const data = await response.json().catch(() => ({}));\n      throw new Error(data.message || \"Unable to update subject\");\n    }\n    await refreshManagementState();\n  } catch (error) {\n    subjectErrors.value = [error.message || \"Unable to update subject.\"];\n  }\n}\n</script>\n","<template>\n  <div class=\"stack\">\n    <section class=\"card card--interactive\">\n      <header class=\"card__header\">\n        <div>\n          <h1 class=\"card__title\">{{ classroom.name }}</h1>\n          <p class=\"card__subtitle\">\n            {{ classroom.gradeLevel?.name ?? \"Unassigned grade\" }} â€¢\n            {{ classroom.homeroomTeacher?.name ?? \"No homeroom\" }}\n          </p>\n        </div>\n        <div class=\"card__actions\">\n          <span v-if=\"classroom.isArchived\" class=\"badge badge--warning\">Archived</span>\n        </div>\n      </header>\n\n      <form class=\"form\" @submit.prevent=\"saveClassroom\" novalidate>\n        <div v-if=\"classErrors.length\" class=\"alert alert--danger\">\n          <p>Unable to update class:</p>\n          <ul>\n            <li v-for=\"error in classErrors\" :key=\"error\">{{ error }}</li>\n          </ul>\n        </div>\n        <div class=\"grid grid--two-column\">\n          <label class=\"form__group\">\n            <span>Name</span>\n            <input v-model.trim=\"classForm.name\" type=\"text\" required />\n          </label>\n          <label class=\"form__group\">\n            <span>Code</span>\n            <input v-model.trim=\"classForm.code\" type=\"text\" />\n          </label>\n        </div>\n        <div class=\"grid grid--two-column\">\n          <label class=\"form__group\">\n            <span>Grade level</span>\n            <select v-model=\"classForm.gradeLevelId\">\n              <option value=\"\">Select grade</option>\n              <option v-for=\"grade in lookups.gradeLevels\" :key=\"grade.id\" :value=\"String(grade.id)\">\n                {{ grade.name }}\n              </option>\n            </select>\n          </label>\n          <label class=\"form__group\">\n            <span>Homeroom teacher</span>\n            <select v-model=\"classForm.homeroomTeacherId\">\n              <option value=\"\">Unassigned</option>\n              <option v-for=\"teacher in lookups.teachers\" :key=\"teacher.id\" :value=\"String(teacher.id)\">\n                {{ teacher.name }}\n              </option>\n            </select>\n          </label>\n        </div>\n        <div class=\"grid grid--two-column\">\n          <label class=\"form__group\">\n            <span>Start date</span>\n            <input v-model=\"classForm.startDate\" type=\"date\" />\n          </label>\n          <label class=\"form__group\">\n            <span>End date</span>\n            <input v-model=\"classForm.endDate\" type=\"date\" />\n          </label>\n        </div>\n        <label class=\"form__group\">\n          <span>Description</span>\n          <textarea v-model.trim=\"classForm.description\" rows=\"2\"></textarea>\n        </label>\n        <div class=\"form__actions\">\n          <button type=\"submit\" class=\"btn\" :disabled=\"isSavingClass\">Save changes</button>\n          <button\n            v-if=\"classroom.isArchived\"\n            type=\"button\"\n            class=\"btn\"\n            @click=\"restoreClass\"\n          >\n            Restore class\n          </button>\n          <button\n            v-else\n            type=\"button\"\n            class=\"btn btn--danger\"\n            @click=\"archiveClass\"\n          >\n            Archive class\n          </button>\n        </div>\n      </form>\n    </section>\n\n    <section class=\"card card--interactive\">\n      <header class=\"card__header\">\n        <h2 class=\"card__title\">Subject assignments</h2>\n      </header>\n      <form class=\"form\" @submit.prevent=\"assignSubject\" novalidate>\n        <div v-if=\"subjectErrors.length\" class=\"alert alert--danger\">\n          <p>Unable to assign subject:</p>\n          <ul>\n            <li v-for=\"error in subjectErrors\" :key=\"error\">{{ error }}</li>\n          </ul>\n        </div>\n        <div class=\"grid grid--two-column\">\n          <label class=\"form__group\">\n            <span>Subject</span>\n            <select v-model=\"subjectForm.subjectId\" required>\n              <option value=\"\">Select subject</option>\n              <option v-for=\"subject in subjects\" :key=\"subject.id\" :value=\"String(subject.id)\">\n                {{ subject.name }}\n              </option>\n            </select>\n          </label>\n          <label class=\"form__group\">\n            <span>Teacher</span>\n            <select v-model=\"subjectForm.teacherId\">\n              <option value=\"\">Unassigned</option>\n              <option v-for=\"teacher in lookups.teachers\" :key=\"teacher.id\" :value=\"String(teacher.id)\">\n                {{ teacher.name }}\n              </option>\n            </select>\n          </label>\n        </div>\n        <label class=\"form__group\">\n          <span>Schedule notes</span>\n          <input v-model.trim=\"subjectForm.schedule\" type=\"text\" />\n        </label>\n        <div class=\"form__actions\">\n          <button type=\"submit\" class=\"btn\" :disabled=\"isSavingSubject\">\n            Save assignment\n          </button>\n        </div>\n      </form>\n\n      <div class=\"table-responsive\">\n        <table class=\"table\">\n          <thead>\n            <tr>\n              <th scope=\"col\">Subject</th>\n              <th scope=\"col\">Teacher</th>\n              <th scope=\"col\">Schedule</th>\n              <th scope=\"col\">Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"assignment in classroom.subjects\" :key=\"assignment.id\">\n              <td data-title=\"Subject\">{{ assignment.subjectName }}</td>\n              <td data-title=\"Teacher\">{{ assignment.teacherName ?? \"Unassigned\" }}</td>\n              <td data-title=\"Schedule\">{{ assignment.schedule ?? \"â€”\" }}</td>\n              <td class=\"table__actions\">\n                <a\n                  class=\"btn btn--small\"\n                  :href=\"`/classes/${classroom.id}/subjects/${assignment.id}/grades`\"\n                >\n                  Grade entry\n                </a>\n                <button\n                  type=\"button\"\n                  class=\"btn btn--small btn--danger\"\n                  @click=\"removeSubject(assignment)\"\n                >\n                  Remove\n                </button>\n              </td>\n            </tr>\n            <tr v-if=\"classroom.subjects.length === 0\">\n              <td colspan=\"4\">No subjects assigned yet.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </section>\n\n    <section class=\"card card--interactive\">\n      <header class=\"card__header\">\n        <h2 class=\"card__title\">Enrollments</h2>\n      </header>\n      <div class=\"card__body\">\n      <label class=\"form__group\">\n        <span>Search students</span>\n        <input\n          v-model.trim=\"studentSearch\"\n          type=\"search\"\n          placeholder=\"Name or student number\"\n          @input=\"queueStudentSearch\"\n        />\n      </label>\n      <div v-if=\"enrollmentErrors.length\" class=\"alert alert--danger\">\n        <p>Unable to update enrollments:</p>\n        <ul>\n          <li v-for=\"error in enrollmentErrors\" :key=\"error\">{{ error }}</li>\n        </ul>\n      </div>\n        <p v-if=\"studentSearch && !isSearching && searchResults.length === 0\" class=\"muted\">\n          No students match your search or they are already enrolled.\n        </p>\n        <ul v-if=\"searchResults.length\" class=\"list list--compact\">\n          <li v-for=\"student in searchResults\" :key=\"student.id\" class=\"list__option\">\n            <div>\n              <strong>{{ student.name }}</strong>\n              <span v-if=\"student.studentNumber\" class=\"badge badge--neutral\">\n                {{ student.studentNumber }}\n              </span>\n            </div>\n            <button\n              type=\"button\"\n              class=\"btn btn--small\"\n              @click=\"addEnrollment(student)\"\n            >\n              Add to class\n            </button>\n          </li>\n        </ul>\n      </div>\n      <div class=\"table-responsive\">\n        <table class=\"table\">\n          <thead>\n            <tr>\n              <th scope=\"col\">Student</th>\n              <th scope=\"col\">Grade</th>\n              <th scope=\"col\">Status</th>\n              <th scope=\"col\">Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"enrollment in classroom.enrollments\" :key=\"enrollment.id\">\n              <td data-title=\"Student\">\n                {{ enrollment.name }}\n                <span v-if=\"enrollment.studentNumber\" class=\"badge badge--neutral\">\n                  {{ enrollment.studentNumber }}\n                </span>\n              </td>\n              <td data-title=\"Grade\">{{ enrollment.gradeLevel ?? \"â€”\" }}</td>\n              <td data-title=\"Status\">{{ enrollment.status ?? \"Active\" }}</td>\n              <td class=\"table__actions\">\n                <button\n                  type=\"button\"\n                  class=\"btn btn--small btn--danger\"\n                  @click=\"removeEnrollment(enrollment)\"\n                >\n                  Remove\n                </button>\n              </td>\n            </tr>\n            <tr v-if=\"classroom.enrollments.length === 0\">\n              <td colspan=\"4\">No students enrolled yet.</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script setup>\nimport { computed, reactive, ref } from \"vue\";\n\nconst props = defineProps({\n  detail: { type: Object, default: () => ({}) },\n  csrfToken: { type: String, default: \"\" },\n});\n\nconst classroom = reactive({ ...(props.detail?.classroom ?? {}) });\nconst subjects = ref([...(props.detail?.subjects ?? [])]);\nconst lookups = reactive({\n  teachers: props.detail?.teachers ?? [],\n  gradeLevels: props.detail?.gradeLevels ?? [],\n});\nconst assessmentTypes = ref([...(props.detail?.assessmentTypes ?? [])]);\n\nconst classForm = reactive({\n  name: classroom.name || \"\",\n  code: classroom.code || \"\",\n  gradeLevelId: classroom.gradeLevel ? String(classroom.gradeLevel.id) : \"\",\n  homeroomTeacherId: classroom.homeroomTeacher ? String(classroom.homeroomTeacher.id) : \"\",\n  startDate: classroom.startDate ? classroom.startDate.slice(0, 10) : \"\",\n  endDate: classroom.endDate ? classroom.endDate.slice(0, 10) : \"\",\n  description: classroom.description || \"\",\n});\n\nconst classErrors = ref([]);\nconst isSavingClass = ref(false);\nconst subjectErrors = ref([]);\nconst subjectForm = reactive({ subjectId: \"\", teacherId: \"\", schedule: \"\" });\nconst isSavingSubject = ref(false);\n\nconst studentSearch = ref(\"\");\nconst searchResults = ref([]);\nconst isSearching = ref(false);\nconst enrollmentErrors = ref([]);\nlet searchTimeout;\n\nconst classroomId = computed(() => classroom.id);\n\nasync function refreshDetail() {\n  const response = await fetch(`/classes/${classroomId.value}`, {\n    headers: { Accept: \"application/json\" },\n  });\n  if (!response.ok) {\n    throw new Error(\"Failed to refresh class\");\n  }\n  const data = await response.json();\n  const detail = data.detail;\n  Object.assign(classroom, detail.classroom);\n  subjects.value = detail.subjects;\n  if (Array.isArray(detail.teachers)) {\n    lookups.teachers = detail.teachers;\n  }\n  if (Array.isArray(detail.gradeLevels)) {\n    lookups.gradeLevels = detail.gradeLevels;\n  }\n  if (detail.classroom.gradeLevel) {\n    classForm.gradeLevelId = String(detail.classroom.gradeLevel.id);\n  }\n  classForm.name = detail.classroom.name || \"\";\n  classForm.code = detail.classroom.code || \"\";\n  classForm.homeroomTeacherId = detail.classroom.homeroomTeacher\n    ? String(detail.classroom.homeroomTeacher.id)\n    : \"\";\n  classForm.startDate = detail.classroom.startDate\n    ? detail.classroom.startDate.slice(0, 10)\n    : \"\";\n  classForm.endDate = detail.classroom.endDate\n    ? detail.classroom.endDate.slice(0, 10)\n    : \"\";\n  classForm.description = detail.classroom.description || \"\";\n  if (Array.isArray(detail.assessmentTypes)) {\n    assessmentTypes.value = detail.assessmentTypes;\n  }\n}\n\nasync function saveClassroom() {\n  classErrors.value = [];\n  if (!classForm.name) {\n    classErrors.value.push(\"Class name is required.\");\n    return;\n  }\n  isSavingClass.value = true;\n  try {\n    const response = await fetch(`/classes/${classroomId.value}/update`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        \"X-CSRF-Token\": props.csrfToken,\n      },\n      body: JSON.stringify(classForm),\n    });\n    const data = await response.json().catch(() => ({}));\n    if (!response.ok) {\n      classErrors.value = data.errors || [data.message || \"Unable to update class.\"];\n      return;\n    }\n    await refreshDetail();\n  } catch (error) {\n    classErrors.value = [error.message || \"Unexpected error updating class.\"];\n  } finally {\n    isSavingClass.value = false;\n  }\n}\n\nasync function archiveClass() {\n  await mutateClass(`/classes/${classroomId.value}/archive`);\n}\n\nasync function restoreClass() {\n  await mutateClass(`/classes/${classroomId.value}/restore`);\n}\n\nasync function mutateClass(url) {\n  classErrors.value = [];\n  try {\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"X-CSRF-Token\": props.csrfToken,\n      },\n    });\n    if (!response.ok) {\n      const data = await response.json().catch(() => ({}));\n      throw new Error(data.message || \"Unable to update class\");\n    }\n    await refreshDetail();\n  } catch (error) {\n    classErrors.value = [error.message || \"Unable to update class.\"];\n  }\n}\n\nasync function assignSubject() {\n  subjectErrors.value = [];\n  if (!subjectForm.subjectId) {\n    subjectErrors.value.push(\"Subject is required.\");\n    return;\n  }\n  isSavingSubject.value = true;\n  try {\n    const response = await fetch(`/classes/${classroomId.value}/subjects`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        \"X-CSRF-Token\": props.csrfToken,\n      },\n      body: JSON.stringify(subjectForm),\n    });\n    const data = await response.json().catch(() => ({}));\n    if (!response.ok) {\n      subjectErrors.value = data.errors || [data.message || \"Unable to assign subject.\"];\n      return;\n    }\n    subjectForm.subjectId = \"\";\n    subjectForm.teacherId = \"\";\n    subjectForm.schedule = \"\";\n    await refreshDetail();\n  } catch (error) {\n    subjectErrors.value = [error.message || \"Unable to assign subject.\"];\n  } finally {\n    isSavingSubject.value = false;\n  }\n}\n\nasync function removeSubject(assignment) {\n  subjectErrors.value = [];\n  try {\n    const response = await fetch(\n      `/classes/${classroomId.value}/subjects/${assignment.id}/delete`,\n      {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"X-CSRF-Token\": props.csrfToken,\n        },\n      },\n    );\n    if (!response.ok) {\n      const data = await response.json().catch(() => ({}));\n      throw new Error(data.message || \"Unable to remove subject.\");\n    }\n    await refreshDetail();\n  } catch (error) {\n    subjectErrors.value = [error.message || \"Unable to remove subject.\"];\n  }\n}\n\nfunction queueStudentSearch() {\n  clearTimeout(searchTimeout);\n  if (!studentSearch.value) {\n    searchResults.value = [];\n    return;\n  }\n  searchTimeout = setTimeout(runStudentSearch, 250);\n}\n\nasync function runStudentSearch() {\n  isSearching.value = true;\n  try {\n    const params = new URLSearchParams({ search: studentSearch.value });\n    const response = await fetch(\n      `/classes/${classroomId.value}/enrollment/search?${params.toString()}`,\n      {\n        headers: { Accept: \"application/json\" },\n      },\n    );\n    if (!response.ok) {\n      throw new Error(\"Search failed\");\n    }\n    const data = await response.json();\n    searchResults.value = data.students || [];\n  } catch (error) {\n    searchResults.value = [];\n  } finally {\n    isSearching.value = false;\n  }\n}\n\nasync function addEnrollment(student) {\n  enrollmentErrors.value = [];\n  try {\n    const response = await fetch(`/classes/${classroomId.value}/enrollments`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        \"X-CSRF-Token\": props.csrfToken,\n      },\n      body: JSON.stringify({ studentId: student.id }),\n    });\n    const data = await response.json().catch(() => ({}));\n    if (!response.ok) {\n      throw new Error(data.message || \"Unable to add student\");\n    }\n    studentSearch.value = \"\";\n    searchResults.value = [];\n    await refreshDetail();\n  } catch (error) {\n    enrollmentErrors.value = [error.message || \"Unable to add student.\"];\n  }\n}\n\nasync function removeEnrollment(enrollment) {\n  enrollmentErrors.value = [];\n  try {\n    const response = await fetch(\n      `/classes/${classroomId.value}/enrollments/${enrollment.id}/delete`,\n      {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"X-CSRF-Token\": props.csrfToken,\n        },\n      },\n    );\n    if (!response.ok) {\n      const data = await response.json().catch(() => ({}));\n      throw new Error(data.message || \"Unable to remove student\");\n    }\n    await refreshDetail();\n  } catch (error) {\n    enrollmentErrors.value = [error.message || \"Unable to remove student.\"];\n  }\n}\n</script>\n","<template>\n  <div class=\"stack\">\n    <section class=\"card card--interactive\">\n      <header class=\"card__header\">\n        <div>\n          <h1 class=\"card__title\">\n            {{ classSubject.classroom.name }} â€¢ {{ classSubject.subject.name }}\n          </h1>\n          <p class=\"card__subtitle\">\n            {{ enrollments.length }} student{{ enrollments.length === 1 ? \"\" : \"s\" }} enrolled\n          </p>\n        </div>\n      </header>\n\n      <div class=\"card__body\">\n        <div class=\"assessment-selector\">\n          <label class=\"form__group\">\n            <span>Assessment</span>\n            <select v-model=\"selectedAssessmentId\" @change=\"applySelectedAssessment\">\n              <option v-if=\"classSubject.assessments.length === 0\" value=\"\">Create an assessment to begin</option>\n              <option\n                v-for=\"assessment in classSubject.assessments\"\n                :key=\"assessment.id\"\n                :value=\"String(assessment.id)\"\n              >\n                {{ assessment.title }}\n              </option>\n            </select>\n          </label>\n        </div>\n      </div>\n\n      <form class=\"form form--inline\" @submit.prevent=\"createAssessment\" novalidate>\n        <fieldset>\n          <legend>Add assessment</legend>\n          <div v-if=\"assessmentErrors.length\" class=\"alert alert--danger\">\n            <p>Unable to create assessment:</p>\n            <ul>\n              <li v-for=\"error in assessmentErrors\" :key=\"error\">{{ error }}</li>\n            </ul>\n          </div>\n          <div class=\"grid grid--three-column\">\n            <label class=\"form__group\">\n              <span>Title</span>\n              <input v-model.trim=\"assessmentForm.title\" type=\"text\" required />\n            </label>\n            <label class=\"form__group\">\n              <span>Type</span>\n              <select v-model=\"assessmentForm.assessmentTypeId\" required>\n                <option value=\"\">Select type</option>\n                <option v-for=\"type in assessmentTypes\" :key=\"type.id\" :value=\"String(type.id)\">\n                  {{ type.name }}\n                </option>\n              </select>\n            </label>\n            <label class=\"form__group\">\n              <span>Due date</span>\n              <input v-model=\"assessmentForm.dueDate\" type=\"date\" />\n            </label>\n          </div>\n          <div class=\"grid grid--two-column\">\n            <label class=\"form__group\">\n              <span>Max score</span>\n              <input v-model=\"assessmentForm.maxScore\" type=\"number\" step=\"0.01\" />\n            </label>\n            <label class=\"form__group\">\n              <span>Description</span>\n              <input v-model.trim=\"assessmentForm.description\" type=\"text\" />\n            </label>\n          </div>\n          <div class=\"form__actions\">\n            <button type=\"submit\" class=\"btn\" :disabled=\"isCreatingAssessment\">Add assessment</button>\n          </div>\n        </fieldset>\n      </form>\n    </section>\n\n    <section class=\"card card--interactive\">\n      <header class=\"card__header\">\n        <h2 class=\"card__title\">Grade entry</h2>\n      </header>\n      <div class=\"card__body\">\n        <div v-if=\"!selectedAssessment\" class=\"alert alert--info\">\n          Create an assessment above to start recording grades.\n        </div>\n        <form v-else class=\"stack\" @submit.prevent=\"saveGrades\" novalidate>\n          <div v-if=\"gradeErrors.length\" class=\"alert alert--danger\">\n            <p>Unable to save grades:</p>\n            <ul>\n              <li v-for=\"error in gradeErrors\" :key=\"error\">{{ error }}</li>\n            </ul>\n          </div>\n          <div class=\"table-responsive\">\n            <table class=\"table\">\n              <thead>\n                <tr>\n                  <th scope=\"col\">Student</th>\n                  <th scope=\"col\">Score</th>\n                  <th scope=\"col\">Max</th>\n                  <th scope=\"col\">Percentage</th>\n                  <th scope=\"col\">Letter</th>\n                  <th scope=\"col\">Comments</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"enrollment in enrollments\" :key=\"enrollment.id\">\n                  <td data-title=\"Student\">\n                    <strong>{{ enrollment.name }}</strong>\n                    <span v-if=\"enrollment.studentNumber\" class=\"badge badge--neutral\">\n                      {{ enrollment.studentNumber }}\n                    </span>\n                  </td>\n                  <td data-title=\"Score\">\n                    <input\n                      v-model.number=\"gradeEntries[enrollment.studentId].score\"\n                      type=\"number\"\n                      step=\"0.01\"\n                      @input=\"recalculate(enrollment.studentId)\"\n                    />\n                  </td>\n                  <td data-title=\"Max\">\n                    <input\n                      v-model.number=\"gradeEntries[enrollment.studentId].maxScore\"\n                      type=\"number\"\n                      step=\"0.01\"\n                      @input=\"recalculate(enrollment.studentId)\"\n                    />\n                  </td>\n                  <td data-title=\"Percentage\">\n                    {{ formatPercentage(gradeEntries[enrollment.studentId].percentage) }}\n                  </td>\n                  <td data-title=\"Letter\">\n                    {{ gradeEntries[enrollment.studentId].letter || \"â€”\" }}\n                  </td>\n                  <td data-title=\"Comments\">\n                    <input\n                      v-model.trim=\"gradeEntries[enrollment.studentId].comments\"\n                      type=\"text\"\n                    />\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n          <div class=\"form__actions\">\n            <button type=\"submit\" class=\"btn\" :disabled=\"isSavingGrades\">Save grades</button>\n          </div>\n        </form>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script setup>\nimport { computed, reactive, ref } from \"vue\";\n\nconst props = defineProps({\n  classSubject: { type: Object, default: () => ({}) },\n  enrollments: { type: Array, default: () => [] },\n  assessmentTypes: { type: Array, default: () => [] },\n  csrfToken: { type: String, default: \"\" },\n});\n\nconst classSubject = reactive({ ...(props.classSubject ?? {}) });\nif (!Array.isArray(classSubject.assessments)) {\n  classSubject.assessments = [];\n}\nconst enrollments = ref([...(props.enrollments ?? [])]);\nconst assessmentTypes = ref([...(props.assessmentTypes ?? [])]);\n\nconst selectedAssessmentId = ref(\n  classSubject.assessments?.[0]?.id ? String(classSubject.assessments[0].id) : \"\",\n);\n\nconst assessmentForm = reactive({\n  title: \"\",\n  assessmentTypeId: \"\",\n  dueDate: \"\",\n  maxScore: \"\",\n  description: \"\",\n});\n\nconst assessmentErrors = ref([]);\nconst isCreatingAssessment = ref(false);\nconst gradeErrors = ref([]);\nconst isSavingGrades = ref(false);\n\nconst gradeEntries = reactive({});\n\nconst selectedAssessment = computed(() => {\n  if (!selectedAssessmentId.value) {\n    return null;\n  }\n  return classSubject.assessments?.find(\n    (assessment) => String(assessment.id) === String(selectedAssessmentId.value),\n  ) || null;\n});\n\nfunction ensureEntry(studentId) {\n  if (!gradeEntries[studentId]) {\n    gradeEntries[studentId] = {\n      score: \"\",\n      maxScore: selectedAssessment.value?.maxScore ?? \"\",\n      percentage: null,\n      letter: null,\n      comments: \"\",\n    };\n  }\n  return gradeEntries[studentId];\n}\n\nfunction hydrateEntries() {\n  enrollments.value.forEach((enrollment) => {\n    const entry = ensureEntry(enrollment.studentId);\n    const grade = selectedAssessment.value?.grades?.find(\n      (row) => row.studentId === enrollment.studentId,\n    );\n    entry.score = grade?.score ?? \"\";\n    entry.maxScore = grade?.maxScore ?? selectedAssessment.value?.maxScore ?? \"\";\n    entry.percentage = grade?.percentage ?? null;\n    entry.letter = grade?.letterGrade ?? null;\n    entry.comments = grade?.comments ?? \"\";\n  });\n}\n\nfunction calculateMetrics(score, maxScore) {\n  if (score === null || score === undefined || score === \"\" || maxScore === null || maxScore === undefined || maxScore === \"\") {\n    return { percentage: null, letter: null };\n  }\n  const parsedScore = Number(score);\n  const parsedMax = Number(maxScore);\n  if (!Number.isFinite(parsedScore) || !Number.isFinite(parsedMax) || parsedMax <= 0) {\n    return { percentage: null, letter: null };\n  }\n  const percentage = Number(((Math.max(0, parsedScore) / parsedMax) * 100).toFixed(2));\n  let letter = null;\n  if (percentage >= 90) {\n    letter = \"A\";\n  } else if (percentage >= 80) {\n    letter = \"B\";\n  } else if (percentage >= 70) {\n    letter = \"C\";\n  } else if (percentage >= 60) {\n    letter = \"D\";\n  } else {\n    letter = \"F\";\n  }\n  return { percentage, letter };\n}\n\nfunction recalculate(studentId) {\n  const entry = ensureEntry(studentId);\n  const metrics = calculateMetrics(entry.score, entry.maxScore);\n  entry.percentage = metrics.percentage;\n  entry.letter = metrics.letter;\n}\n\nfunction formatPercentage(value) {\n  if (value === null || value === undefined) {\n    return \"â€”\";\n  }\n  return `${value.toFixed(2)}%`;\n}\n\nfunction applySelectedAssessment() {\n  hydrateEntries();\n}\n\nhydrateEntries();\n\nasync function createAssessment() {\n  assessmentErrors.value = [];\n  if (!assessmentForm.title) {\n    assessmentErrors.value.push(\"Title is required.\");\n  }\n  if (!assessmentForm.assessmentTypeId) {\n    assessmentErrors.value.push(\"Assessment type is required.\");\n  }\n  if (assessmentErrors.value.length) {\n    return;\n  }\n\n  isCreatingAssessment.value = true;\n  try {\n    const response = await fetch(\n      `/classes/${classSubject.classroomId}/subjects/${classSubject.id}/assessments`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          \"X-CSRF-Token\": props.csrfToken,\n        },\n        body: JSON.stringify(assessmentForm),\n      },\n    );\n    const data = await response.json().catch(() => ({}));\n    if (!response.ok) {\n      assessmentErrors.value = data.errors || [data.message || \"Unable to create assessment.\"];\n      return;\n    }\n    updateContext(data.context);\n    if (data.context?.classSubject?.assessments?.length) {\n      const latest = data.context.classSubject.assessments.at(-1);\n      selectedAssessmentId.value = String(latest.id);\n      hydrateEntries();\n    }\n    assessmentForm.title = \"\";\n    assessmentForm.assessmentTypeId = \"\";\n    assessmentForm.dueDate = \"\";\n    assessmentForm.maxScore = \"\";\n    assessmentForm.description = \"\";\n  } catch (error) {\n    assessmentErrors.value = [error.message || \"Unable to create assessment.\"];\n  } finally {\n    isCreatingAssessment.value = false;\n  }\n}\n\nasync function saveGrades() {\n  gradeErrors.value = [];\n  if (!selectedAssessment.value) {\n    gradeErrors.value.push(\"Select an assessment before saving.\");\n    return;\n  }\n  isSavingGrades.value = true;\n  try {\n    const payload = {\n      assessmentId: selectedAssessment.value.id,\n      entries: enrollments.value.map((enrollment) => ({\n        enrollmentId: enrollment.id,\n        studentId: enrollment.studentId,\n        score: gradeEntries[enrollment.studentId].score,\n        maxScore: gradeEntries[enrollment.studentId].maxScore,\n        comments: gradeEntries[enrollment.studentId].comments,\n      })),\n    };\n    const response = await fetch(\n      `/classes/${classSubject.classroomId}/subjects/${classSubject.id}/grades`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          \"X-CSRF-Token\": props.csrfToken,\n        },\n        body: JSON.stringify(payload),\n      },\n    );\n    const data = await response.json().catch(() => ({}));\n    if (!response.ok) {\n      gradeErrors.value = data.errors || [data.message || \"Unable to save grades.\"];\n      return;\n    }\n    updateContext(data.context);\n    hydrateEntries();\n  } catch (error) {\n    gradeErrors.value = [error.message || \"Unable to save grades.\"];\n  } finally {\n    isSavingGrades.value = false;\n  }\n}\n\nfunction updateContext(context) {\n  if (!context) {\n    return;\n  }\n  Object.assign(classSubject, context.classSubject ?? {});\n  enrollments.value = context.enrollments ?? enrollments.value;\n  if (Array.isArray(context.assessmentTypes)) {\n    assessmentTypes.value = context.assessmentTypes;\n  }\n}\n</script>\n","<template>\n  <section class=\"card card--interactive\">\n    <header class=\"card__header\">\n      <div>\n        <h1 class=\"card__title\">Grade reports</h1>\n        <p class=\"card__subtitle\">\n          Review class and student averages across recorded assessments.\n        </p>\n      </div>\n    </header>\n    <form class=\"form\" @submit.prevent=\"applyFilters\">\n      <div class=\"grid grid--three-column\">\n        <label class=\"form__group\">\n          <span>Class</span>\n          <select v-model=\"filters.classId\">\n            <option value=\"\">All classes</option>\n            <option v-for=\"option in report.filters.classes\" :key=\"option.id\" :value=\"String(option.id)\">\n              {{ option.name }}\n            </option>\n          </select>\n        </label>\n        <label class=\"form__group\">\n          <span>Student</span>\n          <select v-model=\"filters.studentId\">\n            <option value=\"\">All students</option>\n            <option v-for=\"option in report.filters.students\" :key=\"option.id\" :value=\"String(option.id)\">\n              {{ option.name }}\n            </option>\n          </select>\n        </label>\n        <div class=\"form__actions align-end\">\n          <button type=\"submit\" class=\"btn\" :disabled=\"isLoading\">Apply filters</button>\n          <button type=\"button\" class=\"btn btn--ghost\" @click=\"resetFilters\">Reset</button>\n        </div>\n      </div>\n    </form>\n\n    <div class=\"card__body\">\n      <p v-if=\"isLoading\" class=\"muted\">Loading reportâ€¦</p>\n      <p v-else-if=\"!report.summaries.length\" class=\"muted\">No grade data is available for the selected filters.</p>\n    </div>\n\n    <div v-if=\"!isLoading\" class=\"stack\">\n      <section v-for=\"summary in report.summaries\" :key=\"summary.classId\" class=\"report-section\">\n        <header class=\"report-section__header\">\n          <h2>{{ summary.className }}</h2>\n          <p v-if=\"summary.gradeLevel\" class=\"muted\">Grade level: {{ summary.gradeLevel }}</p>\n        </header>\n        <div class=\"table-responsive\">\n          <table class=\"table\">\n            <thead>\n              <tr>\n                <th scope=\"col\">Student</th>\n                <th\n                  v-for=\"subject in summary.subjects\"\n                  :key=\"subject.classSubjectId\"\n                  scope=\"col\"\n                >\n                  {{ subject.name }}\n                </th>\n                <th scope=\"col\">Overall</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"student in summary.students\" :key=\"student.studentId\">\n                <td data-title=\"Student\">\n                  <strong>{{ student.name }}</strong>\n                  <span v-if=\"student.studentNumber\" class=\"badge badge--neutral\">\n                    {{ student.studentNumber }}\n                  </span>\n                </td>\n                <td\n                  v-for=\"subject in summary.subjects\"\n                  :key=\"subject.classSubjectId\"\n                  data-title=\"Subject\"\n                >\n                  {{ formatPercentage(student.subjectGrades[String(subject.classSubjectId)]?.percentage) }}\n                  <span\n                    v-if=\"student.subjectGrades[String(subject.classSubjectId)]?.letterGrade\"\n                    class=\"badge\"\n                  >\n                    {{ student.subjectGrades[String(subject.classSubjectId)].letterGrade }}\n                  </span>\n                </td>\n                <td data-title=\"Overall\">\n                  {{ formatPercentage(student.overall.percentage) }}\n                  <span v-if=\"student.overall.letterGrade\" class=\"badge\">\n                    {{ student.overall.letterGrade }}\n                  </span>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </section>\n    </div>\n  </section>\n</template>\n\n<script setup>\nimport { reactive, ref } from \"vue\";\n\nconst props = defineProps({\n  report: { type: Object, default: () => ({ summaries: [], filters: { classes: [], students: [] } }) },\n});\n\nconst report = reactive({\n  summaries: props.report?.summaries ?? [],\n  filters: {\n    classes: props.report?.filters?.classes ?? [],\n    students: props.report?.filters?.students ?? [],\n  },\n});\n\nconst filters = reactive({\n  classId: props.report?.filters?.classId ? String(props.report.filters.classId) : \"\",\n  studentId: props.report?.filters?.studentId ? String(props.report.filters.studentId) : \"\",\n});\n\nconst isLoading = ref(false);\n\nfunction formatPercentage(value) {\n  if (value === null || value === undefined) {\n    return \"â€”\";\n  }\n  return `${Number(value).toFixed(2)}%`;\n}\n\nfunction resetFilters() {\n  filters.classId = \"\";\n  filters.studentId = \"\";\n  applyFilters();\n}\n\nasync function applyFilters() {\n  isLoading.value = true;\n  try {\n    const params = new URLSearchParams();\n    if (filters.classId) {\n      params.set(\"classId\", filters.classId);\n    }\n    if (filters.studentId) {\n      params.set(\"studentId\", filters.studentId);\n    }\n    const response = await fetch(`/reports/grades/data?${params.toString()}`);\n    if (!response.ok) {\n      throw new Error(\"Failed to load report\");\n    }\n    const data = await response.json();\n    report.summaries = data.report?.summaries ?? [];\n    report.filters.classes = data.report?.filters?.classes ?? report.filters.classes;\n    report.filters.students = data.report?.filters?.students ?? report.filters.students;\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error(error);\n  } finally {\n    isLoading.value = false;\n  }\n}\n</script>\n","import { createApp } from \"vue\";\nimport { registerSharedComponents } from \"../shared/registerComponents\";\nimport ClassManagementApp from \"./components/ClassManagementApp.vue\";\nimport ClassDetailApp from \"./components/ClassDetailApp.vue\";\nimport GradeEntryApp from \"./components/GradeEntryApp.vue\";\nimport GradeReportApp from \"./components/GradeReportApp.vue\";\n\nregisterSharedComponents();\n\nconst COMPONENTS = {\n  ClassManagementApp,\n  ClassDetailApp,\n  GradeEntryApp,\n  GradeReportApp,\n};\n\nfunction readState(stateId) {\n  if (!stateId) {\n    return {};\n  }\n  const element = document.getElementById(stateId);\n  if (!element) {\n    return {};\n  }\n  try {\n    return JSON.parse(element.textContent || \"{}\");\n  } catch (error) {\n    console.warn(`Unable to parse state for ${stateId}`, error);\n    return {};\n  }\n}\n\nfunction mountComponent(el) {\n  const componentName = el.dataset.vueApp;\n  const Component = COMPONENTS[componentName];\n  if (!Component) {\n    return;\n  }\n  const props = readState(el.dataset.stateId);\n  createApp(Component, props).mount(el);\n}\n\ndocument.querySelectorAll(\"[data-vue-app]\").forEach((el) => {\n  if (COMPONENTS[el.dataset.vueApp]) {\n    mountComponent(el);\n  }\n});\n"],"names":["props","__props","classes","ref","subjects","lookups","reactive","_a","_b","showArchivedClasses","showArchivedSubjects","classForm","classErrors","classEditingId","isSavingClass","subjectForm","subjectErrors","subjectEditingId","isSavingSubject","filteredClasses","computed","classroom","visibleSubjects","subject","resetClassForm","beginClassEdit","resetSubjectForm","beginSubjectEdit","refreshManagementState","response","data","submitClassForm","url","error","archiveClass","mutateClass","restoreClass","submitSubjectForm","archiveSubject","mutateSubject","restoreSubject","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_cache","_hoisted_4","_toDisplayString","_hoisted_5","_hoisted_6","$event","_hoisted_7","_Fragment","_renderList","_hoisted_8","_hoisted_9","_hoisted_10","grade","_hoisted_11","_vModelSelect","_hoisted_12","teacher","_hoisted_13","_hoisted_14","_hoisted_15","_vModelText","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_35","_hoisted_34","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_56","_hoisted_55","_c","_d","assessmentTypes","_e","studentSearch","searchResults","isSearching","enrollmentErrors","searchTimeout","classroomId","refreshDetail","detail","saveClassroom","assignSubject","removeSubject","assignment","queueStudentSearch","runStudentSearch","params","addEnrollment","student","removeEnrollment","enrollment","_hoisted_26","_hoisted_57","_hoisted_58","classSubject","enrollments","selectedAssessmentId","assessmentForm","assessmentErrors","isCreatingAssessment","gradeErrors","isSavingGrades","gradeEntries","selectedAssessment","assessment","ensureEntry","studentId","hydrateEntries","entry","row","calculateMetrics","score","maxScore","parsedScore","parsedMax","percentage","letter","recalculate","metrics","formatPercentage","value","applySelectedAssessment","createAssessment","updateContext","latest","saveGrades","payload","context","type","report","filters","_g","_f","_i","_h","isLoading","resetFilters","applyFilters","option","summary","_createTextVNode","COMPONENTS","ClassManagementApp","ClassDetailApp","GradeEntryApp","GradeReportApp","readState","stateId","element","mountComponent","el","componentName","Component","createApp"],"mappings":"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"}
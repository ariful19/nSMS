{"version":3,"file":"academic.js","sources":["../../client/academic/components/ClassManagementApp.vue","../../client/academic/components/ClassDetailApp.vue","../../client/academic/components/GradeEntryApp.vue","../../client/academic/components/GradeReportApp.vue","../../client/academic/main.js"],"sourcesContent":["<template>\n  <div class=\"academic-app\">\n    <section class=\"page-hero page-hero--compact\">\n      <div class=\"page-hero__content\">\n        <p class=\"page-hero__eyebrow\">Academic planning</p>\n        <h1 class=\"page-hero__title\">Classes &amp; Subjects</h1>\n        <p class=\"page-hero__subtitle\">\n          Create calm class rosters and curate your subject catalogue with confident clarity.\n        </p>\n      </div>\n      <dl class=\"page-hero__stats\">\n        <div class=\"page-hero__stat\">\n          <dt>Active classes</dt>\n          <dd>{{ activeClassCount }}</dd>\n        </div>\n        <div class=\"page-hero__stat\">\n          <dt>Students managed</dt>\n          <dd>{{ totalStudents }}</dd>\n        </div>\n        <div class=\"page-hero__stat\">\n          <dt>Subjects available</dt>\n          <dd>{{ activeSubjectCount }}</dd>\n        </div>\n      </dl>\n    </section>\n\n    <section class=\"grid grid--two-column\">\n      <article class=\"card card--interactive\">\n        <header class=\"card__header\">\n          <div>\n            <h2 class=\"card__title\">Classes</h2>\n            <p class=\"card__subtitle\">\n              {{ filteredClasses.length }} of {{ classes.length }} class{{ classes.length === 1 ? '' : 'es' }} in view\n            </p>\n          </div>\n          <div class=\"card__actions\">\n            <div class=\"toolbar\">\n              <div class=\"toolbar__search\">\n                <input\n                  v-model=\"classSearch\"\n                  type=\"search\"\n                  class=\"form__control\"\n                  placeholder=\"Search by name, code, grade or homeroom teacher\"\n                />\n              </div>\n              <div class=\"toolbar__actions\">\n                <label class=\"toggle\">\n                  <input type=\"checkbox\" v-model=\"showArchivedClasses\" />\n                  <span>Show archived</span>\n                </label>\n              </div>\n            </div>\n          </div>\n        </header>\n\n        <form class=\"form\" @submit.prevent=\"submitClassForm\" novalidate>\n          <div v-if=\"classErrors.length\" class=\"alert alert--danger\">\n            <p>Unable to save the class:</p>\n            <ul>\n              <li v-for=\"error in classErrors\" :key=\"error\">{{ error }}</li>\n            </ul>\n          </div>\n\n          <label class=\"form__group\">\n            <span>Name</span>\n            <input v-model.trim=\"classForm.name\" type=\"text\" required class=\"form__control\" placeholder=\"eg. Grade 5 - Maple\" />\n          </label>\n          <label class=\"form__group\">\n            <span>Code</span>\n            <input v-model.trim=\"classForm.code\" type=\"text\" class=\"form__control\" placeholder=\"Optional short code\" />\n          </label>\n          <label class=\"form__group\">\n            <span>Grade level</span>\n            <select v-model=\"classForm.gradeLevelId\" class=\"form__control\">\n              <option value=\"\">Select grade</option>\n              <option v-for=\"grade in lookups.gradeLevels\" :key=\"grade.id\" :value=\"String(grade.id)\">\n                {{ grade.name }}\n              </option>\n            </select>\n          </label>\n          <label class=\"form__group\">\n            <span>Homeroom teacher</span>\n            <select v-model=\"classForm.homeroomTeacherId\" class=\"form__control\">\n              <option value=\"\">Unassigned</option>\n              <option v-for=\"teacher in lookups.teachers\" :key=\"teacher.id\" :value=\"String(teacher.id)\">\n                {{ teacher.name }}\n              </option>\n            </select>\n          </label>\n          <div class=\"form__row\">\n            <label class=\"form__group\">\n              <span>Start date</span>\n              <input v-model=\"classForm.startDate\" type=\"date\" class=\"form__control\" />\n            </label>\n            <label class=\"form__group\">\n              <span>End date</span>\n              <input v-model=\"classForm.endDate\" type=\"date\" class=\"form__control\" />\n            </label>\n          </div>\n          <label class=\"form__group\">\n            <span>Description</span>\n            <textarea v-model.trim=\"classForm.description\" rows=\"2\" class=\"form__control\" placeholder=\"Share the class focus or schedule\"></textarea>\n          </label>\n          <div class=\"form__actions\">\n            <button type=\"submit\" class=\"btn\" :disabled=\"isSavingClass\">\n              {{ classEditingId ? \"Update class\" : \"Create class\" }}\n            </button>\n            <button v-if=\"classEditingId\" type=\"button\" class=\"btn btn--ghost\" @click=\"resetClassForm\">\n              Cancel edit\n            </button>\n            <button\n              v-if=\"isClassFilterActive\"\n              type=\"button\"\n              class=\"btn btn--ghost btn--small\"\n              @click=\"resetClassFilters\"\n            >\n              Clear filters\n            </button>\n          </div>\n        </form>\n\n        <div class=\"card__body\">\n          <div v-if=\"!filteredClasses.length\" class=\"empty-state\">\n            <p class=\"empty-state__title\">No classes match this view</p>\n            <p v-if=\"isClassFilterActive\">\n              Adjust the search or show archived records to discover more classes.\n            </p>\n            <p v-else>Add your first class to begin organising enrollments.</p>\n          </div>\n\n          <div v-else class=\"table-responsive\">\n            <table class=\"table\">\n              <thead>\n                <tr>\n                  <th scope=\"col\">Name</th>\n                  <th scope=\"col\">Grade</th>\n                  <th scope=\"col\">Students</th>\n                  <th scope=\"col\">Subjects</th>\n                  <th scope=\"col\">Actions</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"classroom in filteredClasses\" :key=\"classroom.id\">\n                  <td data-title=\"Name\">\n                    <div class=\"table__title\">\n                      <a :href=\"`/classes/${classroom.id}`\">{{ classroom.name }}</a>\n                    </div>\n                    <div class=\"table__meta\">\n                      <span v-if=\"classroom.homeroomTeacher\" class=\"pill pill--soft\">\n                        Homeroom • {{ classroom.homeroomTeacher.name }}\n                      </span>\n                      <span v-if=\"classroom.code\" class=\"pill pill--soft\">Code • {{ classroom.code }}</span>\n                      <span v-if=\"classroom.isArchived\" class=\"badge badge--warning\">Archived</span>\n                    </div>\n                  </td>\n                  <td data-title=\"Grade\">\n                    {{ classroom.gradeLevel?.name ?? \"—\" }}\n                  </td>\n                  <td data-title=\"Students\">{{ classroom.studentCount }}</td>\n                  <td data-title=\"Subjects\">{{ classroom.subjectCount }}</td>\n                  <td class=\"table__actions\">\n                    <button type=\"button\" class=\"btn btn--small btn--ghost\" @click=\"beginClassEdit(classroom)\">\n                      Edit\n                    </button>\n                    <a class=\"btn btn--small\" :href=\"`/classes/${classroom.id}`\">Open</a>\n                    <button\n                      v-if=\"!classroom.isArchived\"\n                      type=\"button\"\n                      class=\"btn btn--small btn--danger\"\n                      @click=\"archiveClass(classroom)\"\n                    >\n                      Archive\n                    </button>\n                    <button\n                      v-else\n                      type=\"button\"\n                      class=\"btn btn--small\"\n                      @click=\"restoreClass(classroom)\"\n                    >\n                      Restore\n                    </button>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </div>\n      </article>\n\n      <article class=\"card card--interactive\">\n        <header class=\"card__header\">\n          <div>\n            <h2 class=\"card__title\">Subjects</h2>\n            <p class=\"card__subtitle\">\n              {{ visibleSubjects.length }} of {{ subjects.length }} subject{{ subjects.length === 1 ? '' : 's' }} in view\n            </p>\n          </div>\n          <div class=\"card__actions\">\n            <div class=\"toolbar\">\n              <div class=\"toolbar__search\">\n                <input\n                  v-model=\"subjectSearch\"\n                  type=\"search\"\n                  class=\"form__control\"\n                  placeholder=\"Search subjects by name or code\"\n                />\n              </div>\n              <div class=\"toolbar__actions\">\n                <label class=\"toggle\">\n                  <input type=\"checkbox\" v-model=\"showArchivedSubjects\" />\n                  <span>Show archived</span>\n                </label>\n              </div>\n            </div>\n          </div>\n        </header>\n\n        <form class=\"form\" @submit.prevent=\"submitSubjectForm\" novalidate>\n          <div v-if=\"subjectErrors.length\" class=\"alert alert--danger\">\n            <p>Unable to save the subject:</p>\n            <ul>\n              <li v-for=\"error in subjectErrors\" :key=\"error\">{{ error }}</li>\n            </ul>\n          </div>\n          <label class=\"form__group\">\n            <span>Name</span>\n            <input v-model.trim=\"subjectForm.name\" type=\"text\" required class=\"form__control\" placeholder=\"eg. Mathematics\" />\n          </label>\n          <label class=\"form__group\">\n            <span>Code</span>\n            <input v-model.trim=\"subjectForm.code\" type=\"text\" class=\"form__control\" placeholder=\"Optional short code\" />\n          </label>\n          <label class=\"form__group\">\n            <span>Description</span>\n            <textarea v-model.trim=\"subjectForm.description\" rows=\"2\" class=\"form__control\" placeholder=\"Add context or curriculum notes\"></textarea>\n          </label>\n          <div class=\"form__actions\">\n            <button type=\"submit\" class=\"btn\" :disabled=\"isSavingSubject\">\n              {{ subjectEditingId ? \"Update subject\" : \"Create subject\" }}\n            </button>\n            <button v-if=\"subjectEditingId\" type=\"button\" class=\"btn btn--ghost\" @click=\"resetSubjectForm\">\n              Cancel edit\n            </button>\n            <button\n              v-if=\"isSubjectFilterActive\"\n              type=\"button\"\n              class=\"btn btn--ghost btn--small\"\n              @click=\"resetSubjectFilters\"\n            >\n              Clear filters\n            </button>\n          </div>\n        </form>\n\n        <div class=\"card__body\">\n          <div v-if=\"!visibleSubjects.length\" class=\"empty-state\">\n            <p class=\"empty-state__title\">No subjects match this view</p>\n            <p v-if=\"isSubjectFilterActive\">\n              Refine your search or reveal archived subjects to broaden the catalogue.\n            </p>\n            <p v-else>Capture your first subject to build the curriculum.</p>\n          </div>\n\n          <ul v-else class=\"list\">\n            <li v-for=\"subject in visibleSubjects\" :key=\"subject.id\">\n              <div class=\"list__heading\">\n                <strong>{{ subject.name }}</strong>\n                <span v-if=\"subject.code\" class=\"badge badge--neutral\">{{ subject.code }}</span>\n                <span v-if=\"subject.isArchived\" class=\"badge badge--warning\">Archived</span>\n              </div>\n              <p v-if=\"subject.description\" class=\"list__description\">\n                {{ subject.description }}\n              </p>\n              <div class=\"list__meta\">\n                <span>Linked classes: {{ subject.classCount }}</span>\n              </div>\n              <div class=\"list__actions\">\n                <button type=\"button\" class=\"btn btn--small btn--ghost\" @click=\"beginSubjectEdit(subject)\">\n                  Edit\n                </button>\n                <button\n                  v-if=\"!subject.isArchived\"\n                  type=\"button\"\n                  class=\"btn btn--small btn--danger\"\n                  @click=\"archiveSubject(subject)\"\n                >\n                  Archive\n                </button>\n                <button\n                  v-else\n                  type=\"button\"\n                  class=\"btn btn--small\"\n                  @click=\"restoreSubject(subject)\"\n                >\n                  Restore\n                </button>\n              </div>\n            </li>\n          </ul>\n        </div>\n      </article>\n    </section>\n  </div>\n</template>\n\n<script setup>\nimport { computed, reactive, ref } from \"vue\";\n\nconst props = defineProps({\n  classes: { type: Array, default: () => [] },\n  subjects: { type: Array, default: () => [] },\n  lookups: {\n    type: Object,\n    default: () => ({ gradeLevels: [], teachers: [] }),\n  },\n  csrfToken: { type: String, default: \"\" },\n});\n\nconst classes = ref([...props.classes]);\nconst subjects = ref([...props.subjects]);\nconst lookups = reactive({\n  gradeLevels: props.lookups?.gradeLevels ?? [],\n  teachers: props.lookups?.teachers ?? [],\n});\n\nconst showArchivedClasses = ref(false);\nconst showArchivedSubjects = ref(false);\nconst classSearch = ref(\"\");\nconst subjectSearch = ref(\"\");\n\nconst classForm = reactive({\n  name: \"\",\n  code: \"\",\n  gradeLevelId: \"\",\n  homeroomTeacherId: \"\",\n  startDate: \"\",\n  endDate: \"\",\n  description: \"\",\n});\nconst classErrors = ref([]);\nconst classEditingId = ref(null);\nconst isSavingClass = ref(false);\n\nconst subjectForm = reactive({\n  name: \"\",\n  code: \"\",\n  description: \"\",\n});\nconst subjectErrors = ref([]);\nconst subjectEditingId = ref(null);\nconst isSavingSubject = ref(false);\n\nconst classSearchTerm = computed(() => classSearch.value.trim().toLowerCase());\nconst subjectSearchTerm = computed(() => subjectSearch.value.trim().toLowerCase());\n\nconst filteredClasses = computed(() => {\n  return classes.value\n    .filter((classroom) => showArchivedClasses.value || !classroom.isArchived)\n    .filter((classroom) => {\n      if (!classSearchTerm.value) {\n        return true;\n      }\n      const haystack = [\n        classroom.name,\n        classroom.code,\n        classroom.gradeLevel?.name,\n        classroom.homeroomTeacher?.name,\n      ]\n        .filter(Boolean)\n        .join(\" \")\n        .toLowerCase();\n      return haystack.includes(classSearchTerm.value);\n    });\n});\n\nconst visibleSubjects = computed(() => {\n  return subjects.value\n    .filter((subject) => showArchivedSubjects.value || !subject.isArchived)\n    .filter((subject) => {\n      if (!subjectSearchTerm.value) {\n        return true;\n      }\n      const haystack = [subject.name, subject.code]\n        .filter(Boolean)\n        .join(\" \")\n        .toLowerCase();\n      return haystack.includes(subjectSearchTerm.value);\n    });\n});\n\nconst isClassFilterActive = computed(\n  () => !!classSearchTerm.value || showArchivedClasses.value,\n);\nconst isSubjectFilterActive = computed(\n  () => !!subjectSearchTerm.value || showArchivedSubjects.value,\n);\n\nconst activeClassCount = computed(\n  () => classes.value.filter((classroom) => !classroom.isArchived).length,\n);\nconst totalStudents = computed(() =>\n  classes.value.reduce((sum, classroom) => sum + (classroom.studentCount ?? 0), 0),\n);\nconst activeSubjectCount = computed(\n  () => subjects.value.filter((subject) => !subject.isArchived).length,\n);\n\nfunction resetClassForm() {\n  classForm.name = \"\";\n  classForm.code = \"\";\n  classForm.gradeLevelId = \"\";\n  classForm.homeroomTeacherId = \"\";\n  classForm.startDate = \"\";\n  classForm.endDate = \"\";\n  classForm.description = \"\";\n  classEditingId.value = null;\n  classErrors.value = [];\n}\n\nfunction resetSubjectForm() {\n  subjectForm.name = \"\";\n  subjectForm.code = \"\";\n  subjectForm.description = \"\";\n  subjectEditingId.value = null;\n  subjectErrors.value = [];\n}\n\nfunction resetClassFilters() {\n  classSearch.value = \"\";\n  showArchivedClasses.value = false;\n}\n\nfunction resetSubjectFilters() {\n  subjectSearch.value = \"\";\n  showArchivedSubjects.value = false;\n}\n\nfunction beginClassEdit(classroom) {\n  classForm.name = classroom.name || \"\";\n  classForm.code = classroom.code || \"\";\n  classForm.gradeLevelId = classroom.gradeLevel ? String(classroom.gradeLevel.id) : \"\";\n  classForm.homeroomTeacherId = classroom.homeroomTeacher\n    ? String(classroom.homeroomTeacher.id)\n    : \"\";\n  classForm.startDate = classroom.startDate ? classroom.startDate.slice(0, 10) : \"\";\n  classForm.endDate = classroom.endDate ? classroom.endDate.slice(0, 10) : \"\";\n  classForm.description = classroom.description || \"\";\n  classEditingId.value = classroom.id;\n  classErrors.value = [];\n}\n\nfunction beginSubjectEdit(subject) {\n  subjectForm.name = subject.name || \"\";\n  subjectForm.code = subject.code || \"\";\n  subjectForm.description = subject.description || \"\";\n  subjectEditingId.value = subject.id;\n  subjectErrors.value = [];\n}\n\nasync function refreshManagementState() {\n  const response = await fetch(\"/classes\", {\n    headers: { Accept: \"application/json\" },\n  });\n  if (!response.ok) {\n    throw new Error(\"Failed to refresh data\");\n  }\n  const data = await response.json();\n  classes.value = data.management.classes || [];\n  subjects.value = data.management.subjects || [];\n  if (data.management.lookups) {\n    lookups.gradeLevels = data.management.lookups.gradeLevels || lookups.gradeLevels;\n    lookups.teachers = data.management.lookups.teachers || lookups.teachers;\n  }\n}\n\nasync function submitClassForm() {\n  classErrors.value = [];\n  if (!classForm.name) {\n    classErrors.value.push(\"Class name is required.\");\n    return;\n  }\n\n  isSavingClass.value = true;\n  try {\n    const url = classEditingId.value\n      ? `/classes/${classEditingId.value}/update`\n      : \"/classes\";\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        \"X-CSRF-Token\": props.csrfToken,\n      },\n      body: JSON.stringify(classForm),\n    });\n    const data = await response.json().catch(() => ({}));\n    if (!response.ok) {\n      classErrors.value = data.errors || [data.message || \"Unable to save class.\"];\n      return;\n    }\n    await refreshManagementState();\n    resetClassForm();\n  } catch (error) {\n    classErrors.value = [error.message || \"Unexpected error saving class.\"];\n  } finally {\n    isSavingClass.value = false;\n  }\n}\n\nasync function archiveClass(classroom) {\n  await mutateClass(`/classes/${classroom.id}/archive`);\n}\n\nasync function restoreClass(classroom) {\n  await mutateClass(`/classes/${classroom.id}/restore`);\n}\n\nasync function mutateClass(url) {\n  try {\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"X-CSRF-Token\": props.csrfToken,\n      },\n    });\n    if (!response.ok) {\n      const data = await response.json().catch(() => ({}));\n      throw new Error(data.message || \"Unable to update class\");\n    }\n    await refreshManagementState();\n  } catch (error) {\n    classErrors.value = [error.message || \"Unable to update class.\"];\n  }\n}\n\nasync function submitSubjectForm() {\n  subjectErrors.value = [];\n  if (!subjectForm.name) {\n    subjectErrors.value.push(\"Subject name is required.\");\n    return;\n  }\n\n  isSavingSubject.value = true;\n  try {\n    const url = subjectEditingId.value\n      ? `/classes/subjects/${subjectEditingId.value}/update`\n      : \"/classes/subjects\";\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        \"X-CSRF-Token\": props.csrfToken,\n      },\n      body: JSON.stringify(subjectForm),\n    });\n    const data = await response.json().catch(() => ({}));\n    if (!response.ok) {\n      subjectErrors.value = data.errors || [data.message || \"Unable to save subject.\"];\n      return;\n    }\n    await refreshManagementState();\n    resetSubjectForm();\n  } catch (error) {\n    subjectErrors.value = [error.message || \"Unexpected error saving subject.\"];\n  } finally {\n    isSavingSubject.value = false;\n  }\n}\n\nasync function archiveSubject(subject) {\n  await mutateSubject(`/classes/subjects/${subject.id}/archive`);\n}\n\nasync function restoreSubject(subject) {\n  await mutateSubject(`/classes/subjects/${subject.id}/restore`);\n}\n\nasync function mutateSubject(url) {\n  try {\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"X-CSRF-Token\": props.csrfToken,\n      },\n    });\n    if (!response.ok) {\n      const data = await response.json().catch(() => ({}));\n      throw new Error(data.message || \"Unable to update subject\");\n    }\n    await refreshManagementState();\n  } catch (error) {\n    subjectErrors.value = [error.message || \"Unable to update subject.\"];\n  }\n}\n</script>\n","<template>\n  <div class=\"academic-app\">\n    <section class=\"page-hero page-hero--subtle\">\n      <div class=\"page-hero__content\">\n        <p class=\"page-hero__eyebrow\">Class overview</p>\n        <h1 class=\"page-hero__title\">{{ classroom.name }}</h1>\n        <p class=\"page-hero__subtitle\">\n          Manage enrollments, subject coverage, and day-to-day notes for a comfortable, informed classroom.\n        </p>\n      </div>\n      <dl class=\"page-hero__stats\">\n        <div class=\"page-hero__stat\">\n          <dt>Subjects assigned</dt>\n          <dd>{{ subjectCount }}</dd>\n        </div>\n        <div class=\"page-hero__stat\">\n          <dt>Students enrolled</dt>\n          <dd>{{ enrollmentCount }}</dd>\n        </div>\n        <div class=\"page-hero__stat\">\n          <dt>Grade level</dt>\n          <dd>{{ gradeDisplay }}</dd>\n        </div>\n      </dl>\n    </section>\n\n    <div class=\"insight-row\">\n      <article class=\"insight-card\">\n        <p class=\"insight-card__label\">Homeroom teacher</p>\n        <p class=\"insight-card__value\">{{ homeroomDisplay }}</p>\n        <p class=\"insight-card__hint\">\n          Keep staff assignments current so guardians always see the right point of contact.\n        </p>\n      </article>\n      <article class=\"insight-card\">\n        <p class=\"insight-card__label\">Schedule</p>\n        <p class=\"insight-card__value\">{{ scheduleSummary }}</p>\n        <p class=\"insight-card__hint\">Use start and end dates to coordinate year planning and reporting windows.</p>\n      </article>\n      <article class=\"insight-card\">\n        <p class=\"insight-card__label\">Status</p>\n        <p class=\"insight-card__value\">\n          <span class=\"pill\" :class=\"{ 'pill--soft': !classroom.isArchived, 'pill--success': !classroom.isArchived }\">\n            {{ classroom.isArchived ? \"Archived\" : \"Active\" }}\n          </span>\n        </p>\n        <p class=\"insight-card__hint\">Archived classes remain read-only while keeping historical data in reports.</p>\n      </article>\n    </div>\n\n    <section class=\"card card--interactive\">\n      <header class=\"card__header\">\n        <div>\n          <h2 class=\"card__title\">Class information</h2>\n          <p class=\"card__subtitle\">Update high-level details to keep schedules and reporting aligned.</p>\n        </div>\n        <div class=\"card__actions\">\n          <span v-if=\"classroom.isArchived\" class=\"badge badge--warning\">Archived</span>\n        </div>\n      </header>\n\n      <form class=\"form\" @submit.prevent=\"saveClassroom\" novalidate>\n        <div v-if=\"classErrors.length\" class=\"alert alert--danger\">\n          <p>Unable to update class:</p>\n          <ul>\n            <li v-for=\"error in classErrors\" :key=\"error\">{{ error }}</li>\n          </ul>\n        </div>\n        <div class=\"grid grid--two-column\">\n          <label class=\"form__group\">\n            <span>Name</span>\n            <input v-model.trim=\"classForm.name\" type=\"text\" required class=\"form__control\" placeholder=\"eg. Grade 5 - Maple\" />\n          </label>\n          <label class=\"form__group\">\n            <span>Code</span>\n            <input v-model.trim=\"classForm.code\" type=\"text\" class=\"form__control\" placeholder=\"Optional short code\" />\n          </label>\n        </div>\n        <div class=\"grid grid--two-column\">\n          <label class=\"form__group\">\n            <span>Grade level</span>\n            <select v-model=\"classForm.gradeLevelId\" class=\"form__control\">\n              <option value=\"\">Select grade</option>\n              <option v-for=\"grade in lookups.gradeLevels\" :key=\"grade.id\" :value=\"String(grade.id)\">\n                {{ grade.name }}\n              </option>\n            </select>\n          </label>\n          <label class=\"form__group\">\n            <span>Homeroom teacher</span>\n            <select v-model=\"classForm.homeroomTeacherId\" class=\"form__control\">\n              <option value=\"\">Unassigned</option>\n              <option v-for=\"teacher in lookups.teachers\" :key=\"teacher.id\" :value=\"String(teacher.id)\">\n                {{ teacher.name }}\n              </option>\n            </select>\n          </label>\n        </div>\n        <div class=\"grid grid--two-column\">\n          <label class=\"form__group\">\n            <span>Start date</span>\n            <input v-model=\"classForm.startDate\" type=\"date\" class=\"form__control\" />\n          </label>\n          <label class=\"form__group\">\n            <span>End date</span>\n            <input v-model=\"classForm.endDate\" type=\"date\" class=\"form__control\" />\n          </label>\n        </div>\n        <label class=\"form__group\">\n          <span>Description</span>\n          <textarea\n            v-model.trim=\"classForm.description\"\n            rows=\"2\"\n            class=\"form__control\"\n            placeholder=\"Share classroom notes, planning highlights, or scheduling nuances\"\n          ></textarea>\n        </label>\n        <div class=\"form__actions\">\n          <button type=\"submit\" class=\"btn\" :disabled=\"isSavingClass\">Save changes</button>\n          <button\n            v-if=\"classroom.isArchived\"\n            type=\"button\"\n            class=\"btn btn--ghost\"\n            @click=\"restoreClass\"\n          >\n            Restore class\n          </button>\n          <button\n            v-else\n            type=\"button\"\n            class=\"btn btn--danger\"\n            @click=\"archiveClass\"\n          >\n            Archive class\n          </button>\n        </div>\n      </form>\n    </section>\n\n    <section class=\"card card--interactive\">\n      <header class=\"card__header\">\n        <div>\n          <h2 class=\"card__title\">Subject assignments</h2>\n          <p class=\"card__subtitle\">Pair subjects with teachers to create a smooth, predictable timetable.</p>\n        </div>\n      </header>\n      <form class=\"form\" @submit.prevent=\"assignSubject\" novalidate>\n        <div v-if=\"subjectErrors.length\" class=\"alert alert--danger\">\n          <p>Unable to assign subject:</p>\n          <ul>\n            <li v-for=\"error in subjectErrors\" :key=\"error\">{{ error }}</li>\n          </ul>\n        </div>\n        <div class=\"grid grid--two-column\">\n          <label class=\"form__group\">\n            <span>Subject</span>\n            <select v-model=\"subjectForm.subjectId\" required class=\"form__control\">\n              <option value=\"\">Select subject</option>\n              <option v-for=\"subject in subjects\" :key=\"subject.id\" :value=\"String(subject.id)\">\n                {{ subject.name }}\n              </option>\n            </select>\n          </label>\n          <label class=\"form__group\">\n            <span>Teacher</span>\n            <select v-model=\"subjectForm.teacherId\" class=\"form__control\">\n              <option value=\"\">Unassigned</option>\n              <option v-for=\"teacher in lookups.teachers\" :key=\"teacher.id\" :value=\"String(teacher.id)\">\n                {{ teacher.name }}\n              </option>\n            </select>\n          </label>\n        </div>\n        <label class=\"form__group\">\n          <span>Schedule notes</span>\n          <input v-model.trim=\"subjectForm.schedule\" type=\"text\" class=\"form__control\" placeholder=\"eg. Tue & Thu • 10:30\" />\n        </label>\n        <div class=\"form__actions\">\n          <button type=\"submit\" class=\"btn\" :disabled=\"isSavingSubject\">Save assignment</button>\n        </div>\n      </form>\n\n      <div class=\"card__body\">\n        <div v-if=\"!classroom.subjects.length\" class=\"empty-state\">\n          <p class=\"empty-state__title\">No subjects assigned yet</p>\n          <p>Add a subject above to begin mapping the learning plan for this class.</p>\n        </div>\n\n        <div v-else class=\"table-responsive\">\n          <table class=\"table\">\n            <thead>\n              <tr>\n                <th scope=\"col\">Subject</th>\n                <th scope=\"col\">Teacher</th>\n                <th scope=\"col\">Schedule</th>\n                <th scope=\"col\">Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"assignment in classroom.subjects\" :key=\"assignment.id\">\n                <td data-title=\"Subject\">{{ assignment.subjectName }}</td>\n                <td data-title=\"Teacher\">{{ assignment.teacherName ?? \"Unassigned\" }}</td>\n                <td data-title=\"Schedule\">{{ assignment.schedule ?? \"—\" }}</td>\n                <td class=\"table__actions\">\n                  <a\n                    class=\"btn btn--small btn--ghost\"\n                    :href=\"`/classes/${classroom.id}/subjects/${assignment.id}/grades`\"\n                  >\n                    Grade entry\n                  </a>\n                  <button\n                    type=\"button\"\n                    class=\"btn btn--small btn--danger\"\n                    @click=\"removeSubject(assignment)\"\n                  >\n                    Remove\n                  </button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </section>\n\n    <section class=\"card card--interactive\">\n      <header class=\"card__header\">\n        <div>\n          <h2 class=\"card__title\">Enrollments</h2>\n          <p class=\"card__subtitle\">Search for students and welcome them into this class roster.</p>\n        </div>\n      </header>\n      <div class=\"card__body\">\n        <label class=\"form__group\">\n          <span>Search students</span>\n          <input\n            v-model.trim=\"studentSearch\"\n            type=\"search\"\n            class=\"form__control\"\n            placeholder=\"Type a name or student number\"\n            @input=\"queueStudentSearch\"\n          />\n        </label>\n        <div v-if=\"enrollmentErrors.length\" class=\"alert alert--danger\">\n          <p>Unable to update enrollments:</p>\n          <ul>\n            <li v-for=\"error in enrollmentErrors\" :key=\"error\">{{ error }}</li>\n          </ul>\n        </div>\n        <p v-if=\"isSearching\" class=\"muted\">Searching students…</p>\n        <p\n          v-if=\"studentSearch && !isSearching && searchResults.length === 0\"\n          class=\"muted\"\n        >\n          No students match your search or they are already enrolled.\n        </p>\n        <ul v-if=\"searchResults.length\" class=\"list list--compact\">\n          <li v-for=\"student in searchResults\" :key=\"student.id\" class=\"list__option\">\n            <div>\n              <strong>{{ student.name }}</strong>\n              <span v-if=\"student.studentNumber\" class=\"badge badge--neutral\">\n                {{ student.studentNumber }}\n              </span>\n            </div>\n            <button type=\"button\" class=\"btn btn--small\" @click=\"addEnrollment(student)\">\n              Add to class\n            </button>\n          </li>\n        </ul>\n      </div>\n      <div class=\"card__body\">\n        <div v-if=\"!classroom.enrollments.length\" class=\"empty-state\">\n          <p class=\"empty-state__title\">No students enrolled yet</p>\n          <p>Invite students above to build the roster and unlock grade entry.</p>\n        </div>\n        <div v-else class=\"table-responsive\">\n          <table class=\"table\">\n            <thead>\n              <tr>\n                <th scope=\"col\">Student</th>\n                <th scope=\"col\">Grade</th>\n                <th scope=\"col\">Status</th>\n                <th scope=\"col\">Actions</th>\n              </tr>\n            </thead>\n            <tbody>\n              <tr v-for=\"enrollment in classroom.enrollments\" :key=\"enrollment.id\">\n                <td data-title=\"Student\">\n                  {{ enrollment.name }}\n                  <span v-if=\"enrollment.studentNumber\" class=\"badge badge--neutral\">\n                    {{ enrollment.studentNumber }}\n                  </span>\n                </td>\n                <td data-title=\"Grade\">{{ enrollment.gradeLevel ?? \"—\" }}</td>\n                <td data-title=\"Status\">{{ enrollment.status ?? \"Active\" }}</td>\n                <td class=\"table__actions\">\n                  <button\n                    type=\"button\"\n                    class=\"btn btn--small btn--danger\"\n                    @click=\"removeEnrollment(enrollment)\"\n                  >\n                    Remove\n                  </button>\n                </td>\n              </tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script setup>\nimport { computed, reactive, ref } from \"vue\";\n\nconst props = defineProps({\n  detail: { type: Object, default: () => ({}) },\n  csrfToken: { type: String, default: \"\" },\n});\n\nconst classroom = reactive({ ...(props.detail?.classroom ?? {}) });\nconst subjects = ref([...(props.detail?.subjects ?? [])]);\nconst lookups = reactive({\n  teachers: props.detail?.teachers ?? [],\n  gradeLevels: props.detail?.gradeLevels ?? [],\n});\nconst assessmentTypes = ref([...(props.detail?.assessmentTypes ?? [])]);\n\nconst classForm = reactive({\n  name: classroom.name || \"\",\n  code: classroom.code || \"\",\n  gradeLevelId: classroom.gradeLevel ? String(classroom.gradeLevel.id) : \"\",\n  homeroomTeacherId: classroom.homeroomTeacher ? String(classroom.homeroomTeacher.id) : \"\",\n  startDate: classroom.startDate ? classroom.startDate.slice(0, 10) : \"\",\n  endDate: classroom.endDate ? classroom.endDate.slice(0, 10) : \"\",\n  description: classroom.description || \"\",\n});\n\nconst classErrors = ref([]);\nconst isSavingClass = ref(false);\nconst subjectErrors = ref([]);\nconst subjectForm = reactive({ subjectId: \"\", teacherId: \"\", schedule: \"\" });\nconst isSavingSubject = ref(false);\n\nconst studentSearch = ref(\"\");\nconst searchResults = ref([]);\nconst isSearching = ref(false);\nconst enrollmentErrors = ref([]);\nlet searchTimeout;\n\nconst classroomId = computed(() => classroom.id);\nconst subjectCount = computed(() => classroom.subjects?.length ?? 0);\nconst enrollmentCount = computed(() => classroom.enrollments?.length ?? 0);\nconst gradeDisplay = computed(() => classroom.gradeLevel?.name ?? \"Unassigned\");\nconst homeroomDisplay = computed(\n  () => classroom.homeroomTeacher?.name ?? \"No homeroom assigned\",\n);\n\nfunction formatDate(value) {\n  if (!value) {\n    return null;\n  }\n  const parsed = new Date(value);\n  if (Number.isNaN(parsed.getTime())) {\n    return null;\n  }\n  return parsed.toLocaleDateString(undefined, {\n    year: \"numeric\",\n    month: \"short\",\n    day: \"numeric\",\n  });\n}\n\nconst scheduleSummary = computed(() => {\n  const start = formatDate(classroom.startDate);\n  const end = formatDate(classroom.endDate);\n  if (start && end) {\n    return `${start} → ${end}`;\n  }\n  if (start) {\n    return `Starts ${start}`;\n  }\n  if (end) {\n    return `Ends ${end}`;\n  }\n  return \"Flexible schedule\";\n});\n\nasync function refreshDetail() {\n  const response = await fetch(`/classes/${classroomId.value}`, {\n    headers: { Accept: \"application/json\" },\n  });\n  if (!response.ok) {\n    throw new Error(\"Failed to refresh class\");\n  }\n  const data = await response.json();\n  const detail = data.detail;\n  Object.assign(classroom, detail.classroom);\n  subjects.value = detail.subjects;\n  if (Array.isArray(detail.teachers)) {\n    lookups.teachers = detail.teachers;\n  }\n  if (Array.isArray(detail.gradeLevels)) {\n    lookups.gradeLevels = detail.gradeLevels;\n  }\n  if (detail.classroom.gradeLevel) {\n    classForm.gradeLevelId = String(detail.classroom.gradeLevel.id);\n  } else {\n    classForm.gradeLevelId = \"\";\n  }\n  classForm.name = detail.classroom.name || \"\";\n  classForm.code = detail.classroom.code || \"\";\n  classForm.homeroomTeacherId = detail.classroom.homeroomTeacher\n    ? String(detail.classroom.homeroomTeacher.id)\n    : \"\";\n  classForm.startDate = detail.classroom.startDate\n    ? detail.classroom.startDate.slice(0, 10)\n    : \"\";\n  classForm.endDate = detail.classroom.endDate\n    ? detail.classroom.endDate.slice(0, 10)\n    : \"\";\n  classForm.description = detail.classroom.description || \"\";\n  if (Array.isArray(detail.assessmentTypes)) {\n    assessmentTypes.value = detail.assessmentTypes;\n  }\n}\n\nasync function saveClassroom() {\n  classErrors.value = [];\n  if (!classForm.name) {\n    classErrors.value.push(\"Class name is required.\");\n    return;\n  }\n  isSavingClass.value = true;\n  try {\n    const response = await fetch(`/classes/${classroomId.value}/update`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        \"X-CSRF-Token\": props.csrfToken,\n      },\n      body: JSON.stringify(classForm),\n    });\n    const data = await response.json().catch(() => ({}));\n    if (!response.ok) {\n      classErrors.value = data.errors || [data.message || \"Unable to update class.\"];\n      return;\n    }\n    await refreshDetail();\n  } catch (error) {\n    classErrors.value = [error.message || \"Unexpected error updating class.\"];\n  } finally {\n    isSavingClass.value = false;\n  }\n}\n\nasync function archiveClass() {\n  await mutateClass(`/classes/${classroomId.value}/archive`);\n}\n\nasync function restoreClass() {\n  await mutateClass(`/classes/${classroomId.value}/restore`);\n}\n\nasync function mutateClass(url) {\n  classErrors.value = [];\n  try {\n    const response = await fetch(url, {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n        \"X-CSRF-Token\": props.csrfToken,\n      },\n    });\n    if (!response.ok) {\n      const data = await response.json().catch(() => ({}));\n      throw new Error(data.message || \"Unable to update class\");\n    }\n    await refreshDetail();\n  } catch (error) {\n    classErrors.value = [error.message || \"Unable to update class.\"];\n  }\n}\n\nasync function assignSubject() {\n  subjectErrors.value = [];\n  if (!subjectForm.subjectId) {\n    subjectErrors.value.push(\"Subject is required.\");\n    return;\n  }\n  isSavingSubject.value = true;\n  try {\n    const response = await fetch(`/classes/${classroomId.value}/subjects`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        \"X-CSRF-Token\": props.csrfToken,\n      },\n      body: JSON.stringify(subjectForm),\n    });\n    const data = await response.json().catch(() => ({}));\n    if (!response.ok) {\n      subjectErrors.value = data.errors || [data.message || \"Unable to assign subject.\"];\n      return;\n    }\n    subjectForm.subjectId = \"\";\n    subjectForm.teacherId = \"\";\n    subjectForm.schedule = \"\";\n    await refreshDetail();\n  } catch (error) {\n    subjectErrors.value = [error.message || \"Unable to assign subject.\"];\n  } finally {\n    isSavingSubject.value = false;\n  }\n}\n\nasync function removeSubject(assignment) {\n  subjectErrors.value = [];\n  try {\n    const response = await fetch(\n      `/classes/${classroomId.value}/subjects/${assignment.id}/delete`,\n      {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"X-CSRF-Token\": props.csrfToken,\n        },\n      },\n    );\n    if (!response.ok) {\n      const data = await response.json().catch(() => ({}));\n      throw new Error(data.message || \"Unable to remove subject.\");\n    }\n    await refreshDetail();\n  } catch (error) {\n    subjectErrors.value = [error.message || \"Unable to remove subject.\"];\n  }\n}\n\nfunction queueStudentSearch() {\n  clearTimeout(searchTimeout);\n  if (!studentSearch.value) {\n    searchResults.value = [];\n    return;\n  }\n  searchTimeout = setTimeout(runStudentSearch, 250);\n}\n\nasync function runStudentSearch() {\n  isSearching.value = true;\n  try {\n    const params = new URLSearchParams({ search: studentSearch.value });\n    const response = await fetch(\n      `/classes/${classroomId.value}/enrollment/search?${params.toString()}`,\n      {\n        headers: { Accept: \"application/json\" },\n      },\n    );\n    if (!response.ok) {\n      throw new Error(\"Search failed\");\n    }\n    const data = await response.json();\n    searchResults.value = data.students || [];\n  } catch (error) {\n    searchResults.value = [];\n  } finally {\n    isSearching.value = false;\n  }\n}\n\nasync function addEnrollment(student) {\n  enrollmentErrors.value = [];\n  try {\n    const response = await fetch(`/classes/${classroomId.value}/enrollments`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Accept: \"application/json\",\n        \"X-CSRF-Token\": props.csrfToken,\n      },\n      body: JSON.stringify({ studentId: student.id }),\n    });\n    const data = await response.json().catch(() => ({}));\n    if (!response.ok) {\n      throw new Error(data.message || \"Unable to add student\");\n    }\n    studentSearch.value = \"\";\n    searchResults.value = [];\n    await refreshDetail();\n  } catch (error) {\n    enrollmentErrors.value = [error.message || \"Unable to add student.\"];\n  }\n}\n\nasync function removeEnrollment(enrollment) {\n  enrollmentErrors.value = [];\n  try {\n    const response = await fetch(\n      `/classes/${classroomId.value}/enrollments/${enrollment.id}/delete`,\n      {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"X-CSRF-Token\": props.csrfToken,\n        },\n      },\n    );\n    if (!response.ok) {\n      const data = await response.json().catch(() => ({}));\n      throw new Error(data.message || \"Unable to remove student\");\n    }\n    await refreshDetail();\n  } catch (error) {\n    enrollmentErrors.value = [error.message || \"Unable to remove student.\"];\n  }\n}\n</script>\n","<template>\n  <div class=\"academic-app\">\n    <section class=\"page-hero page-hero--subtle\">\n      <div class=\"page-hero__content\">\n        <p class=\"page-hero__eyebrow\">Grade workspace</p>\n        <h1 class=\"page-hero__title\">\n          {{ classSubject.classroom.name }} • {{ classSubject.subject.name }}\n        </h1>\n        <p class=\"page-hero__subtitle\">\n          Capture grades with clarity, track assessment progress, and keep every student supported.\n        </p>\n      </div>\n      <dl class=\"page-hero__stats\">\n        <div class=\"page-hero__stat\">\n          <dt>Enrolled students</dt>\n          <dd>{{ enrollments.length }}</dd>\n        </div>\n        <div class=\"page-hero__stat\">\n          <dt>Assessments</dt>\n          <dd>{{ classSubject.assessments.length }}</dd>\n        </div>\n        <div class=\"page-hero__stat\">\n          <dt>Instructor</dt>\n          <dd>{{ teacherDisplay }}</dd>\n        </div>\n      </dl>\n    </section>\n\n    <section class=\"card card--interactive\">\n      <header class=\"card__header\">\n        <div>\n          <h2 class=\"card__title\">Assessments</h2>\n          <p class=\"card__subtitle\">Choose an assessment to review or add a new experience below.</p>\n        </div>\n      </header>\n      <div class=\"card__body\">\n        <div class=\"toolbar\">\n          <div class=\"toolbar__search\">\n            <label class=\"form__group\">\n              <span>Assessment</span>\n              <select\n                v-model=\"selectedAssessmentId\"\n                class=\"form__control\"\n                @change=\"applySelectedAssessment\"\n              >\n                <option v-if=\"classSubject.assessments.length === 0\" value=\"\">\n                  Create an assessment to begin\n                </option>\n                <option\n                  v-for=\"assessment in classSubject.assessments\"\n                  :key=\"assessment.id\"\n                  :value=\"String(assessment.id)\"\n                >\n                  {{ assessment.title }}\n                </option>\n              </select>\n            </label>\n          </div>\n          <div class=\"toolbar__actions\">\n            <span v-if=\"classSubject.schedule\" class=\"pill pill--soft\">\n              {{ classSubject.schedule }}\n            </span>\n          </div>\n        </div>\n\n        <div v-if=\"selectedAssessment\" class=\"insight-row\">\n          <article class=\"insight-card\">\n            <p class=\"insight-card__label\">Assessment type</p>\n            <p class=\"insight-card__value\">\n              {{ selectedAssessment.assessmentType?.name ?? \"Not set\" }}\n            </p>\n            <p class=\"insight-card__hint\">Consistent types keep reporting balanced.</p>\n          </article>\n          <article class=\"insight-card\">\n            <p class=\"insight-card__label\">Due date</p>\n            <p class=\"insight-card__value\">{{ formatDueDate(selectedAssessment.dueDate) }}</p>\n            <p class=\"insight-card__hint\">Schedule clearly signals expectations to students.</p>\n          </article>\n          <article class=\"insight-card\">\n            <p class=\"insight-card__label\">Default max score</p>\n            <p class=\"insight-card__value\">\n              {{ selectedAssessment.maxScore != null ? selectedAssessment.maxScore : \"Flexible\" }}\n            </p>\n            <p class=\"insight-card__hint\">You can customise per student in the grid below.</p>\n          </article>\n        </div>\n      </div>\n\n      <form class=\"form form--inline\" @submit.prevent=\"createAssessment\" novalidate>\n        <fieldset>\n          <legend>Add assessment</legend>\n          <div v-if=\"assessmentErrors.length\" class=\"alert alert--danger\">\n            <p>Unable to create assessment:</p>\n            <ul>\n              <li v-for=\"error in assessmentErrors\" :key=\"error\">{{ error }}</li>\n            </ul>\n          </div>\n          <div class=\"grid grid--three-column\">\n            <label class=\"form__group\">\n              <span>Title</span>\n              <input v-model.trim=\"assessmentForm.title\" type=\"text\" required class=\"form__control\" placeholder=\"eg. Module reflection\" />\n            </label>\n            <label class=\"form__group\">\n              <span>Type</span>\n              <select v-model=\"assessmentForm.assessmentTypeId\" required class=\"form__control\">\n                <option value=\"\">Select type</option>\n                <option v-for=\"type in assessmentTypes\" :key=\"type.id\" :value=\"String(type.id)\">\n                  {{ type.name }}\n                </option>\n              </select>\n            </label>\n            <label class=\"form__group\">\n              <span>Due date</span>\n              <input v-model=\"assessmentForm.dueDate\" type=\"date\" class=\"form__control\" />\n            </label>\n          </div>\n          <div class=\"grid grid--two-column\">\n            <label class=\"form__group\">\n              <span>Max score</span>\n              <input v-model=\"assessmentForm.maxScore\" type=\"number\" step=\"0.01\" class=\"form__control\" />\n            </label>\n            <label class=\"form__group\">\n              <span>Description</span>\n              <input v-model.trim=\"assessmentForm.description\" type=\"text\" class=\"form__control\" placeholder=\"Optional context\" />\n            </label>\n          </div>\n          <div class=\"form__actions\">\n            <button type=\"submit\" class=\"btn\" :disabled=\"isCreatingAssessment\">Add assessment</button>\n          </div>\n        </fieldset>\n      </form>\n    </section>\n\n    <section class=\"card card--interactive\">\n      <header class=\"card__header\">\n        <div>\n          <h2 class=\"card__title\">Grade entry</h2>\n          <p class=\"card__subtitle\">\n            Enter scores, adjust maximums, and leave caring comments for each learner.\n          </p>\n        </div>\n      </header>\n      <div class=\"card__body\">\n        <div v-if=\"!selectedAssessment\" class=\"empty-state\">\n          <p class=\"empty-state__title\">No assessment selected</p>\n          <p>Create an assessment above or choose one to begin recording grades.</p>\n        </div>\n        <form v-else class=\"stack\" @submit.prevent=\"saveGrades\" novalidate>\n          <div v-if=\"gradeErrors.length\" class=\"alert alert--danger\">\n            <p>Unable to save grades:</p>\n            <ul>\n              <li v-for=\"error in gradeErrors\" :key=\"error\">{{ error }}</li>\n            </ul>\n          </div>\n          <div class=\"table-responsive\">\n            <table class=\"table\">\n              <thead>\n                <tr>\n                  <th scope=\"col\">Student</th>\n                  <th scope=\"col\">Score</th>\n                  <th scope=\"col\">Max</th>\n                  <th scope=\"col\">Percentage</th>\n                  <th scope=\"col\">Letter</th>\n                  <th scope=\"col\">Comments</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"enrollment in enrollments\" :key=\"enrollment.id\">\n                  <td data-title=\"Student\">\n                    <strong>{{ enrollment.name }}</strong>\n                    <span v-if=\"enrollment.studentNumber\" class=\"badge badge--neutral\">\n                      {{ enrollment.studentNumber }}\n                    </span>\n                  </td>\n                  <td data-title=\"Score\">\n                    <input\n                      v-model.number=\"gradeEntries[enrollment.studentId].score\"\n                      type=\"number\"\n                      step=\"0.01\"\n                      class=\"form__control\"\n                      @input=\"recalculate(enrollment.studentId)\"\n                    />\n                  </td>\n                  <td data-title=\"Max\">\n                    <input\n                      v-model.number=\"gradeEntries[enrollment.studentId].maxScore\"\n                      type=\"number\"\n                      step=\"0.01\"\n                      class=\"form__control\"\n                      @input=\"recalculate(enrollment.studentId)\"\n                    />\n                  </td>\n                  <td data-title=\"Percentage\">\n                    {{ formatPercentage(gradeEntries[enrollment.studentId].percentage) }}\n                  </td>\n                  <td data-title=\"Letter\">\n                    {{ gradeEntries[enrollment.studentId].letter || \"—\" }}\n                  </td>\n                  <td data-title=\"Comments\">\n                    <input\n                      v-model.trim=\"gradeEntries[enrollment.studentId].comments\"\n                      type=\"text\"\n                      class=\"form__control\"\n                      placeholder=\"Encouragement or feedback\"\n                    />\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n          <div class=\"form__actions\">\n            <button type=\"submit\" class=\"btn\" :disabled=\"isSavingGrades\">Save grades</button>\n          </div>\n        </form>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script setup>\nimport { computed, reactive, ref } from \"vue\";\n\nconst props = defineProps({\n  classSubject: { type: Object, default: () => ({}) },\n  enrollments: { type: Array, default: () => [] },\n  assessmentTypes: { type: Array, default: () => [] },\n  csrfToken: { type: String, default: \"\" },\n});\n\nconst classSubject = reactive({ ...(props.classSubject ?? {}) });\nif (!Array.isArray(classSubject.assessments)) {\n  classSubject.assessments = [];\n}\nconst enrollments = ref([...(props.enrollments ?? [])]);\nconst assessmentTypes = ref([...(props.assessmentTypes ?? [])]);\n\nconst selectedAssessmentId = ref(\n  classSubject.assessments?.[0]?.id ? String(classSubject.assessments[0].id) : \"\",\n);\n\nconst assessmentForm = reactive({\n  title: \"\",\n  assessmentTypeId: \"\",\n  dueDate: \"\",\n  maxScore: \"\",\n  description: \"\",\n});\n\nconst assessmentErrors = ref([]);\nconst isCreatingAssessment = ref(false);\nconst gradeErrors = ref([]);\nconst isSavingGrades = ref(false);\n\nconst gradeEntries = reactive({});\n\nconst selectedAssessment = computed(() => {\n  if (!selectedAssessmentId.value) {\n    return null;\n  }\n  return (\n    classSubject.assessments?.find(\n      (assessment) => String(assessment.id) === String(selectedAssessmentId.value),\n    ) || null\n  );\n});\n\nconst teacherDisplay = computed(\n  () => classSubject.teacher?.name ?? \"Unassigned teacher\",\n);\n\nfunction ensureEntry(studentId) {\n  if (!gradeEntries[studentId]) {\n    gradeEntries[studentId] = {\n      score: \"\",\n      maxScore: selectedAssessment.value?.maxScore ?? \"\",\n      percentage: null,\n      letter: null,\n      comments: \"\",\n    };\n  }\n  return gradeEntries[studentId];\n}\n\nfunction hydrateEntries() {\n  enrollments.value.forEach((enrollment) => {\n    const entry = ensureEntry(enrollment.studentId);\n    const grade = selectedAssessment.value?.grades?.find(\n      (row) => row.studentId === enrollment.studentId,\n    );\n    entry.score = grade?.score ?? \"\";\n    entry.maxScore = grade?.maxScore ?? selectedAssessment.value?.maxScore ?? \"\";\n    entry.percentage = grade?.percentage ?? null;\n    entry.letter = grade?.letterGrade ?? null;\n    entry.comments = grade?.comments ?? \"\";\n  });\n}\n\nfunction calculateMetrics(score, maxScore) {\n  if (\n    score === null ||\n    score === undefined ||\n    score === \"\" ||\n    maxScore === null ||\n    maxScore === undefined ||\n    maxScore === \"\"\n  ) {\n    return { percentage: null, letter: null };\n  }\n  const parsedScore = Number(score);\n  const parsedMax = Number(maxScore);\n  if (!Number.isFinite(parsedScore) || !Number.isFinite(parsedMax) || parsedMax <= 0) {\n    return { percentage: null, letter: null };\n  }\n  const percentage = Number(((Math.max(0, parsedScore) / parsedMax) * 100).toFixed(2));\n  let letter = null;\n  if (percentage >= 90) {\n    letter = \"A\";\n  } else if (percentage >= 80) {\n    letter = \"B\";\n  } else if (percentage >= 70) {\n    letter = \"C\";\n  } else if (percentage >= 60) {\n    letter = \"D\";\n  } else {\n    letter = \"F\";\n  }\n  return { percentage, letter };\n}\n\nfunction recalculate(studentId) {\n  const entry = ensureEntry(studentId);\n  const metrics = calculateMetrics(entry.score, entry.maxScore);\n  entry.percentage = metrics.percentage;\n  entry.letter = metrics.letter;\n}\n\nfunction formatPercentage(value) {\n  if (value === null || value === undefined || Number.isNaN(value)) {\n    return \"—\";\n  }\n  return `${Number(value).toFixed(2)}%`;\n}\n\nfunction formatDueDate(value) {\n  if (!value) {\n    return \"Not scheduled\";\n  }\n  const date = new Date(value);\n  if (Number.isNaN(date.getTime())) {\n    return \"Not scheduled\";\n  }\n  return date.toLocaleDateString(undefined, {\n    weekday: \"short\",\n    month: \"short\",\n    day: \"numeric\",\n    year: \"numeric\",\n  });\n}\n\nfunction applySelectedAssessment() {\n  hydrateEntries();\n}\n\nhydrateEntries();\n\nasync function createAssessment() {\n  assessmentErrors.value = [];\n  if (!assessmentForm.title) {\n    assessmentErrors.value.push(\"Title is required.\");\n  }\n  if (!assessmentForm.assessmentTypeId) {\n    assessmentErrors.value.push(\"Assessment type is required.\");\n  }\n  if (assessmentErrors.value.length) {\n    return;\n  }\n\n  isCreatingAssessment.value = true;\n  try {\n    const response = await fetch(\n      `/classes/${classSubject.classroomId}/subjects/${classSubject.id}/assessments`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          \"X-CSRF-Token\": props.csrfToken,\n        },\n        body: JSON.stringify(assessmentForm),\n      },\n    );\n    const data = await response.json().catch(() => ({}));\n    if (!response.ok) {\n      assessmentErrors.value = data.errors || [data.message || \"Unable to create assessment.\"];\n      return;\n    }\n    updateContext(data.context);\n    if (data.context?.classSubject?.assessments?.length) {\n      const latest = data.context.classSubject.assessments.at(-1);\n      selectedAssessmentId.value = String(latest.id);\n      hydrateEntries();\n    }\n    assessmentForm.title = \"\";\n    assessmentForm.assessmentTypeId = \"\";\n    assessmentForm.dueDate = \"\";\n    assessmentForm.maxScore = \"\";\n    assessmentForm.description = \"\";\n  } catch (error) {\n    assessmentErrors.value = [error.message || \"Unable to create assessment.\"];\n  } finally {\n    isCreatingAssessment.value = false;\n  }\n}\n\nasync function saveGrades() {\n  gradeErrors.value = [];\n  if (!selectedAssessment.value) {\n    gradeErrors.value.push(\"Select an assessment before saving.\");\n    return;\n  }\n  isSavingGrades.value = true;\n  try {\n    const payload = {\n      assessmentId: selectedAssessment.value.id,\n      entries: enrollments.value.map((enrollment) => ({\n        enrollmentId: enrollment.id,\n        studentId: enrollment.studentId,\n        score: gradeEntries[enrollment.studentId].score,\n        maxScore: gradeEntries[enrollment.studentId].maxScore,\n        comments: gradeEntries[enrollment.studentId].comments,\n      })),\n    };\n    const response = await fetch(\n      `/classes/${classSubject.classroomId}/subjects/${classSubject.id}/grades`,\n      {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          Accept: \"application/json\",\n          \"X-CSRF-Token\": props.csrfToken,\n        },\n        body: JSON.stringify(payload),\n      },\n    );\n    const data = await response.json().catch(() => ({}));\n    if (!response.ok) {\n      gradeErrors.value = data.errors || [data.message || \"Unable to save grades.\"];\n      return;\n    }\n    updateContext(data.context);\n    hydrateEntries();\n  } catch (error) {\n    gradeErrors.value = [error.message || \"Unable to save grades.\"];\n  } finally {\n    isSavingGrades.value = false;\n  }\n}\n\nfunction updateContext(context) {\n  if (!context) {\n    return;\n  }\n  Object.assign(classSubject, context.classSubject ?? {});\n  enrollments.value = context.enrollments ?? enrollments.value;\n  if (Array.isArray(context.assessmentTypes)) {\n    assessmentTypes.value = context.assessmentTypes;\n  }\n}\n</script>\n","<template>\n  <div class=\"academic-app\">\n    <section class=\"page-hero page-hero--compact\">\n      <div class=\"page-hero__content\">\n        <p class=\"page-hero__eyebrow\">Progress analytics</p>\n        <h1 class=\"page-hero__title\">Grade reports</h1>\n        <p class=\"page-hero__subtitle\">\n          Explore class performance, celebrate wins, and spot support opportunities with calm, clear visuals.\n        </p>\n      </div>\n      <dl class=\"page-hero__stats\">\n        <div class=\"page-hero__stat\">\n          <dt>Classes tracked</dt>\n          <dd>{{ classCount }}</dd>\n        </div>\n        <div class=\"page-hero__stat\">\n          <dt>Students represented</dt>\n          <dd>{{ studentCount }}</dd>\n        </div>\n        <div class=\"page-hero__stat\">\n          <dt>Average overall</dt>\n          <dd>{{ overallAverageLabel }}</dd>\n        </div>\n      </dl>\n    </section>\n\n    <section class=\"card card--interactive\">\n      <header class=\"card__header\">\n        <div>\n          <h2 class=\"card__title\">Filters</h2>\n          <p class=\"card__subtitle\">Focus on a specific class or learner to tailor the insights you need.</p>\n        </div>\n      </header>\n      <form class=\"form\" @submit.prevent=\"applyFilters\">\n        <div class=\"grid grid--three-column\">\n          <label class=\"form__group\">\n            <span>Class</span>\n            <select v-model=\"filters.classId\" class=\"form__control\">\n              <option value=\"\">All classes</option>\n              <option v-for=\"option in report.filters.classes\" :key=\"option.id\" :value=\"String(option.id)\">\n                {{ option.name }}\n              </option>\n            </select>\n          </label>\n          <label class=\"form__group\">\n            <span>Student</span>\n            <select v-model=\"filters.studentId\" class=\"form__control\">\n              <option value=\"\">All students</option>\n              <option v-for=\"option in report.filters.students\" :key=\"option.id\" :value=\"String(option.id)\">\n                {{ option.name }}\n              </option>\n            </select>\n          </label>\n          <div class=\"form__actions align-end\">\n            <button type=\"submit\" class=\"btn\" :disabled=\"isLoading\">Apply filters</button>\n            <button\n              type=\"button\"\n              class=\"btn btn--ghost btn--small\"\n              :disabled=\"!filtersApplied\"\n              @click=\"resetFilters\"\n            >\n              Reset\n            </button>\n          </div>\n        </div>\n      </form>\n\n      <div class=\"card__body\">\n        <p v-if=\"isLoading\" class=\"muted\">Loading report…</p>\n        <div v-else-if=\"!report.summaries.length\" class=\"empty-state\">\n          <p class=\"empty-state__title\">No grade data yet</p>\n          <p>Record assessments for your classes to populate this space with insights.</p>\n        </div>\n      </div>\n\n      <div v-if=\"!isLoading && report.summaries.length\" class=\"stack\">\n        <section v-for=\"summary in report.summaries\" :key=\"summary.classId\" class=\"report-section\">\n          <header class=\"report-section__header\">\n            <div>\n              <h2>{{ summary.className }}</h2>\n              <p v-if=\"summary.gradeLevel\" class=\"muted\">Grade level: {{ summary.gradeLevel }}</p>\n            </div>\n            <div class=\"pill pill--soft\">\n              {{ summary.subjects.length }} subject{{ summary.subjects.length === 1 ? '' : 's' }}\n            </div>\n          </header>\n          <div class=\"table-responsive\">\n            <table class=\"table\">\n              <thead>\n                <tr>\n                  <th scope=\"col\">Student</th>\n                  <th\n                    v-for=\"subject in summary.subjects\"\n                    :key=\"subject.classSubjectId\"\n                    scope=\"col\"\n                  >\n                    {{ subject.name }}\n                  </th>\n                  <th scope=\"col\">Overall</th>\n                </tr>\n              </thead>\n              <tbody>\n                <tr v-for=\"student in summary.students\" :key=\"student.studentId\">\n                  <td data-title=\"Student\">\n                    <strong>{{ student.name }}</strong>\n                    <span v-if=\"student.studentNumber\" class=\"badge badge--neutral\">\n                      {{ student.studentNumber }}\n                    </span>\n                  </td>\n                  <td\n                    v-for=\"subject in summary.subjects\"\n                    :key=\"subject.classSubjectId\"\n                    data-title=\"Subject\"\n                  >\n                    {{ formatPercentage(student.subjectGrades[String(subject.classSubjectId)]?.percentage) }}\n                    <span\n                      v-if=\"student.subjectGrades[String(subject.classSubjectId)]?.letterGrade\"\n                      class=\"badge\"\n                    >\n                      {{ student.subjectGrades[String(subject.classSubjectId)].letterGrade }}\n                    </span>\n                  </td>\n                  <td data-title=\"Overall\">\n                    {{ formatPercentage(student.overall.percentage) }}\n                    <span v-if=\"student.overall.letterGrade\" class=\"badge badge--success\">\n                      {{ student.overall.letterGrade }}\n                    </span>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n          </div>\n        </section>\n      </div>\n    </section>\n  </div>\n</template>\n\n<script setup>\nimport { computed, reactive, ref } from \"vue\";\n\nconst props = defineProps({\n  report: { type: Object, default: () => ({ summaries: [], filters: { classes: [], students: [] } }) },\n});\n\nconst report = reactive({\n  summaries: props.report?.summaries ?? [],\n  filters: {\n    classes: props.report?.filters?.classes ?? [],\n    students: props.report?.filters?.students ?? [],\n  },\n});\n\nconst filters = reactive({\n  classId: props.report?.filters?.classId ? String(props.report.filters.classId) : \"\",\n  studentId: props.report?.filters?.studentId ? String(props.report.filters.studentId) : \"\",\n});\n\nconst isLoading = ref(false);\n\nconst classCount = computed(() => report.summaries?.length ?? 0);\nconst studentCount = computed(() => {\n  const ids = new Set();\n  report.summaries?.forEach((summary) => {\n    summary.students?.forEach((student) => ids.add(student.studentId));\n  });\n  return ids.size;\n});\n\nconst overallAverage = computed(() => {\n  let total = 0;\n  let count = 0;\n  report.summaries?.forEach((summary) => {\n    summary.students?.forEach((student) => {\n      if (student.overall?.percentage !== null && student.overall?.percentage !== undefined) {\n        const value = Number(student.overall.percentage);\n        if (!Number.isNaN(value)) {\n          total += value;\n          count += 1;\n        }\n      }\n    });\n  });\n  if (count === 0) {\n    return null;\n  }\n  return Number((total / count).toFixed(2));\n});\n\nconst overallAverageLabel = computed(() => {\n  if (overallAverage.value === null) {\n    return \"—\";\n  }\n  return `${overallAverage.value.toFixed(2)}%`;\n});\n\nconst filtersApplied = computed(() => Boolean(filters.classId || filters.studentId));\n\nfunction formatPercentage(value) {\n  if (value === null || value === undefined || Number.isNaN(value)) {\n    return \"—\";\n  }\n  return `${Number(value).toFixed(2)}%`;\n}\n\nfunction resetFilters() {\n  filters.classId = \"\";\n  filters.studentId = \"\";\n  applyFilters();\n}\n\nasync function applyFilters() {\n  isLoading.value = true;\n  try {\n    const params = new URLSearchParams();\n    if (filters.classId) {\n      params.set(\"classId\", filters.classId);\n    }\n    if (filters.studentId) {\n      params.set(\"studentId\", filters.studentId);\n    }\n    const response = await fetch(`/reports/grades/data?${params.toString()}`);\n    if (!response.ok) {\n      throw new Error(\"Failed to load report\");\n    }\n    const data = await response.json();\n    report.summaries = data.report?.summaries ?? [];\n    report.filters.classes = data.report?.filters?.classes ?? report.filters.classes;\n    report.filters.students = data.report?.filters?.students ?? report.filters.students;\n  } catch (error) {\n    // eslint-disable-next-line no-console\n    console.error(error);\n  } finally {\n    isLoading.value = false;\n  }\n}\n</script>\n","import { createApp } from \"vue\";\nimport { registerSharedComponents } from \"../shared/registerComponents\";\nimport ClassManagementApp from \"./components/ClassManagementApp.vue\";\nimport ClassDetailApp from \"./components/ClassDetailApp.vue\";\nimport GradeEntryApp from \"./components/GradeEntryApp.vue\";\nimport GradeReportApp from \"./components/GradeReportApp.vue\";\n\nregisterSharedComponents();\n\nconst COMPONENTS = {\n  ClassManagementApp,\n  ClassDetailApp,\n  GradeEntryApp,\n  GradeReportApp,\n};\n\nfunction readState(stateId) {\n  if (!stateId) {\n    return {};\n  }\n  const element = document.getElementById(stateId);\n  if (!element) {\n    return {};\n  }\n  try {\n    return JSON.parse(element.textContent || \"{}\");\n  } catch (error) {\n    console.warn(`Unable to parse state for ${stateId}`, error);\n    return {};\n  }\n}\n\nfunction mountComponent(el) {\n  const componentName = el.dataset.vueApp;\n  const Component = COMPONENTS[componentName];\n  if (!Component) {\n    return;\n  }\n  const props = readState(el.dataset.stateId);\n  createApp(Component, props).mount(el);\n}\n\ndocument.querySelectorAll(\"[data-vue-app]\").forEach((el) => {\n  if (COMPONENTS[el.dataset.vueApp]) {\n    mountComponent(el);\n  }\n});\n"],"names":["props","__props","classes","ref","subjects","lookups","reactive","_a","_b","showArchivedClasses","showArchivedSubjects","classSearch","subjectSearch","classForm","classErrors","classEditingId","isSavingClass","subjectForm","subjectErrors","subjectEditingId","isSavingSubject","classSearchTerm","computed","subjectSearchTerm","filteredClasses","classroom","visibleSubjects","subject","isClassFilterActive","isSubjectFilterActive","activeClassCount","totalStudents","sum","activeSubjectCount","resetClassForm","resetSubjectForm","resetClassFilters","resetSubjectFilters","beginClassEdit","beginSubjectEdit","refreshManagementState","response","data","submitClassForm","url","error","archiveClass","mutateClass","restoreClass","submitSubjectForm","archiveSubject","mutateSubject","restoreSubject","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_cache","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_toDisplayString","_hoisted_11","_hoisted_12","_hoisted_13","$event","_hoisted_14","_hoisted_15","_hoisted_16","_Fragment","_renderList","_hoisted_17","_hoisted_18","_hoisted_19","grade","_hoisted_20","_vModelSelect","_hoisted_21","teacher","_hoisted_22","_hoisted_23","_hoisted_24","_vModelText","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_49","_hoisted_48","_hoisted_30","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","_hoisted_54","_hoisted_55","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_68","_hoisted_69","_hoisted_70","_hoisted_71","_hoisted_72","_hoisted_73","_hoisted_74","_hoisted_75","_hoisted_77","_hoisted_76","_hoisted_65","_c","_d","assessmentTypes","_e","studentSearch","searchResults","isSearching","enrollmentErrors","searchTimeout","classroomId","subjectCount","enrollmentCount","gradeDisplay","homeroomDisplay","formatDate","value","parsed","scheduleSummary","start","end","refreshDetail","detail","saveClassroom","assignSubject","removeSubject","assignment","queueStudentSearch","runStudentSearch","params","addEnrollment","student","removeEnrollment","enrollment","_normalizeClass","_hoisted_31","_hoisted_32","_hoisted_66","_hoisted_67","classSubject","enrollments","selectedAssessmentId","assessmentForm","assessmentErrors","isCreatingAssessment","gradeErrors","isSavingGrades","gradeEntries","selectedAssessment","assessment","teacherDisplay","ensureEntry","studentId","hydrateEntries","entry","row","calculateMetrics","score","maxScore","parsedScore","parsedMax","percentage","letter","recalculate","metrics","formatPercentage","formatDueDate","date","applySelectedAssessment","createAssessment","updateContext","latest","saveGrades","payload","context","type","report","filters","_g","_f","_i","_h","isLoading","classCount","studentCount","ids","summary","overallAverage","total","count","overallAverageLabel","filtersApplied","resetFilters","applyFilters","option","_createTextVNode","COMPONENTS","ClassManagementApp","ClassDetailApp","GradeEntryApp","GradeReportApp","readState","stateId","element","mountComponent","el","componentName","Component","createApp"],"mappings":"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"}